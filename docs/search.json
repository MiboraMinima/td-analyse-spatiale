[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "TD analyse spatiale",
    "section": "",
    "text": "Informations\nEn TD :\n\nTD1 : Introduction √† R\nTD2 : Analyse centrographique\nTD3 : S√©gr√©gation spatiale\nTD4 : R√©seaux, graphe et accessibilit√©\nTD5 : Mobilit√©s et flux\n\nEn DM :\n\nDM1 : Analyse centrographique populations, logements, pauvret√©\nDM2 : Mod√®le gravitaire sur flux de pop inter-r√©gions",
    "crumbs": [
      "Informations"
    ]
  },
  {
    "objectID": "00_intro_r/intro_r.html",
    "href": "00_intro_r/intro_r.html",
    "title": "1¬† Introduction √† R et RStudio",
    "section": "",
    "text": "1.1 RStudio\nComme dans la majorit√© des langages interpr√©t√©s, quand on installe R, une console interactive est install√©e en m√™me temps. Vous pouvez y acc√©der en cherchant R dans vos programmes ou en effectuant les op√©rations ctrl+R (ouvrir l‚Äôex√©cuteur de commmande) &gt; R &gt; enter. C‚Äôest comme quand vous ouvrez un terminal powershell sous Windows, sauf qu‚Äôau lieu d‚Äô√©crire du powershell, vous √©crivez du R.\nDans l‚Äôabsolu, on pourrait √©crire nos scripts dans la console directement mais ce serait tr√®s peu pratique. Aussi, quand on code, on utilise un Environnement de D√©veloppement (IDE en Anglais), et ce, quelque soit le langage que l‚Äôon utilise. Ces derniers int√®grent des tas de fonctionnalit√©s pour vous simplifier la vie (colorisation du code, diagnostique automatique des erreurs de syntaxe, outils int√©gr√©s de visualisation, etc.). Il y en a beaucoup. Certains sont g√©n√©riques (ils supportent de nombreux langages) comme Visual Studio Code ou sp√©cifique, destin√© √† un seul langage, comme c‚Äôest le cas de RStudio pour R.\nIl s‚Äôagit de l‚ÄôIDE le plus utilis√© pour faire du R, et de tr√®s tr√®s loin. Il est open-source et fr√©quemment mis √† jour.",
    "crumbs": [
      "Travaux dirig√©s",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introduction √† R et RStudio</span>"
    ]
  },
  {
    "objectID": "00_intro_r/intro_r.html#rstudio",
    "href": "00_intro_r/intro_r.html#rstudio",
    "title": "1¬† Introduction √† R et RStudio",
    "section": "",
    "text": "1.1.1 Cr√©ation d‚Äôun projet\n\n1.1.1.1 Organiser son dossier de travail\nLa premi√®re chose √† faire quand on commence un projet, quelqu‚Äôil soit, c‚Äôest de se cr√©er un espace de travail coh√©rent ou vous vous retrouverez facilement. Ce dernier doit √™tre le plus g√©n√©ralisable possible, de telle sorte √† ce que vous puissier le r√©employer pour d‚Äôautres projets. De cette fa√ßon, vous ne serez plus jamais perdus dans vos fichiers et vous gagnerez un temps consid√©rable. Pour de l‚Äôanalyse/traitement de donn√©es, je vous conseil la configuration suivante :\n\nüìÅ ./data/: l√† o√π vous stockerez vos donn√©es\n\nüìÅ ./data/src/: Les donn√©es sources\nüìÅ ./data/res/: Les donn√©es cr√©√©es par vos scripts\n\nüìÅ ./docs/: l√† o√π vous enregistrerez vos documents words par exemple.\nüìÅ ./figures/: l√† o√π vous enregistrerez vos graphs, cartes, ect.\nüìÅ ./scripts/: vos scripts R\n\nLe ./ fait r√©f√©rence √† la racine du dossier : le chemin du dossier dans lequel les dossiers ci-dessus sont enregistr√©s. Cette racine peut √™tre situ√©e o√π vous le souhaitez sur votre machine.\n\n\n\n\n\n\nBien nommer ses fichiers\n\n\n\nPourquoi est-ce important ?\n\nPour ne pas vous demander √† chaque fois pendant trois plombes √† comment vous allez √©crire un nom de fichier ou de dossier.\nEncore une fois pour avoir une organisation nickel.\nPour √©viter de vous retrouver avec des erreurs li√©s √† des espaces ou des caract√®res sp√©ciaux.\n\nAussi, je vous conseil d‚Äôadopter une convention d‚Äô√©criture. Il y en a plein, vous pouvez inventer la votre tant qu‚Äôelle est coh√©rente. Il est notamment important de proscrire tous les signes diacritiques (√©, √®, √ß, √†, etc.), les espaces et les signes (/, %, $, etc.). Je vous conseil la convention qui consiste √† n‚Äô√©crire qu‚Äôen miniscule, sans caract√®res sp√©ciaux et en repla√ßant les espaces par des underscores (_).\nPar exemple :\n\n\nBien\ntd0_introduction_r.R\nrendu_20250506_analyse_spatiale.R\ngraph_epervier.png\n\nNaze\nTD 0 Introduction √† R .R\nRendu_2025/05/06_AnalyseSpatiale.R\nGraphique √©pervier.png\n\n\n\n\n\n\n1.1.1.2 Cr√©er un projet RStudio\nUne fois que vous avez cr√©√© votre espace de travail dans votre explorateur de fichier, proc√©dez aux op√©rations suivantes pour cr√©er un projet RStudio.\n\n\n\n\n\n\nInstructions\n\n\n\n\nOuvrez RStudio\nCr√©ez un nouveau projet: Fichier &gt; Nouveau projet &gt; R√©pertoire existant. Indiquez le dossier que vous avez cr√©√© pr√©c√©demment.\nCr√©ez un nouveau script R : Fichier &gt; Nouveau fichier &gt; Script R. Enregistrez le (ctrl+s).\n\n\n\n\n\n\n1.1.2 L‚Äôinterface\n\n\n\n\n\n\nFigure¬†1.1: Interface de RStudio\n\n\n\nL‚Äôinterface fonctionne avec des panneaux que l‚Äôon peut changer au besoin dans les pr√©f√©rences du logiciel1. Par d√©faut, on a l‚Äôorganisation de la Figure¬†1.1.\n1¬†Affichage&gt;Volet&gt;Options de mise en page des volets\nA):\n\nDans ce panneau, vous avez vos scripts R. C‚Äôest ici que vous √©crirez.\n\nB):\n\nConsole: La console R. La m√™me console int√©ractive que quand on ouvre R sans RStudio.\nTerminal: Le terminal de votre machine. Sous Windows du ???.\nTravaux: Des jobs que vous faites tourner en arri√®re-plan.\n\nC):\n\nEnvironnement: La liste des objets de la session courante.\nHistorique: L‚Äôhistorique des commandes introduites dans la console R.\nConnexions: Connexions √† des bases de donn√©es externes.\nTutoriel: tutos\n\nD):\n\nFichiers: Un explorateur de fichier (comme l‚Äôexplorateur de fichier windows)\nGraphiques: Un espace o√π les graphs seront affich√©s.\nPaquets: Liste de packages, vous pouvez les installer depuis cet onglet.\nAide: Onglet o√π sont affich√©s les documentations des fonctions que vous utilisez.\nVisualisateur: Onglet d‚Äôaffichage des graphs 3D, des pages webs, etc.\nPr√©sentation: Onglet d√©di√© aux pr√©sentations.\n\n\nIl existe d‚Äôautres panneaux que l‚Äôon peut rajouter √† l‚Äôinterface au besoin. Vous aurez surtout besoin de la console, de l‚Äôenvironnement, de l‚Äôonglet graphique et aide.",
    "crumbs": [
      "Travaux dirig√©s",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introduction √† R et RStudio</span>"
    ]
  },
  {
    "objectID": "00_intro_r/intro_r.html#les-bases-de-r-pour-le-traitement-de-donn√©es",
    "href": "00_intro_r/intro_r.html#les-bases-de-r-pour-le-traitement-de-donn√©es",
    "title": "1¬† Introduction √† R et RStudio",
    "section": "1.2 Les bases de R pour le traitement de donn√©es",
    "text": "1.2 Les bases de R pour le traitement de donn√©es\n\n\n\n\n\n\nOrganiser son script R\n\n\n\nPour ne pas se perdre dans son code et garantir sa reproductibilit√©, il convient de l‚Äôorganiser soigneusement.\nUn exemple typique de script en analyse de donn√©es et le suivant :\n\nChargement des packages. C‚Äôest toujours la premi√®re chose √† faire.\n√âcriture des constantes (si n√©cessaire)\nChargement des donn√©es\nPr√©-traitement des donn√©es (nettoyage, merge, etc.)\nL‚Äôanalyse que l‚Äôon souhaite effectuer (le c≈ìur du script)\nAnalyse des r√©sultats (graphs, r√©sum√©s, etc.)\n\nPour bien se retrouver dans le script, on peut tirer parti des commentaires et cr√©er des titres et des sous-titres. Par exemple :\n\n################################################################################\n# Titre 1 ----\n################################################################################\n## Sous titre 1.1 --------------------------------------------------------------\n# Commentaire classique\n\n### Sous titre 1.1.1 -----------------------------------------------------------\n# Commentaire classique\n\n################################################################################\n# Titre 2 ----\n################################################################################\n## Sous titre 2.1 --------------------------------------------------------------\n# code etc.\n\nNotez que RStudio identifie automatiquement les commentaires suivis d‚Äôun minimum de quatre caract√®res similaire (- ou #) comme des niveaux de titre. Pour d√©finir le niveau, il faut ajuster le nombre de # avant le titre (# h1, ## h2, etc.). Pour vous rendre d‚Äôune section √† une autre dans votre script, vous pouvez utiliser le navigateur situ√© en bas √† gauche de l‚Äôonglet script.\n\n\n\n\n\n\n\n\nInstruction\n\n\n\nLisez l‚Äôintroduction du Chapter 2.\n\n\n\n1.2.1 Les variables\n\n\n\n\n\n\nInstruction: variable\n\n\n\nLisez la Section 2.1.\n\nCr√©ez des variables de classe diff√©rentes\nEssayez d‚Äôeffectuer des op√©rations math√©matiques entre des variables de diff√©rentes classes. Qu‚Äôobservez vous ?\n\n\n\n\n\n1.2.2 Les vecteurs\n\n\n\n\n\n\nInstructions: vecteurs\n\n\n\nLisez la Section 2.2.\nVecteur num√©rique :\n\nEffectuer des op√©rations entre deux vecteurs num√©riques : que constatez vous ? Est-ce que vos op√©rations marchent avec des vecteurs de longueur diff√©rente ?\nEffectuer des op√©rations entre une variable num√©rique et un vecteur num√©rique : que constatez vous ?\nCalculer des statistiques √©l√©mentaires sur ces vecteurs (cf. Section 5.1.1).\n\nVecteur de cha√Æne de caract√®res : (aidez vous de la Section 5.1.2)\n\nvector_str &lt;- c(\"A\", \"a\", \"b\", \"b\", \"B\", \"C\", \"C\")\n\n\nQuels sont les modalit√©s du vecteur vector_str ?\nCombien il y a t il de valeurs associ√©es √† chacune de ces modalit√©s ?\n\n\n\n\n\n1.2.3 Les tableaux de donn√©es : les Data Frames\n\n\n\n\n\n\nInstruction: cr√©ation de Data Frame\n\n\n\nLisez la Section 2.3.\nCr√©ez un DF de √† partir de quatre vecteurs de longueur 5 (2 num√©riques, 2 de cha√Æne cararact√®res).\n\n\n\n\n\n\n\n\nInstructions: manipulation de Data Frame\n\n\n\nVous apprendrez avec un jeu de de donn√©es d‚Äôentra√Ænement issu du package palmerpenguins.\n\ndata(package = 'palmerpenguins')\nhead(penguins)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     40.3     18.0         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n6  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n\n\nCommencez par d√©crire bri√®vement le tableau de donn√©es :\n\nNombre d‚Äôobservations\nNombre de variables (leur classe)\n\nPour les op√©rations suivantes, appuyez-vous sur la Section 4.1.\n\nS√©lection des variables : select()\n\nS√©lectionner les variables island et bill_len.\nS√©lectionner uniquement les variables num√©riques\nS√©lectionner toutes les variables qualitatives sauf island\n\nFiltrer les observations : filter()\n\nNe conserver que les pingouins Ad√©lie de l‚Äô√Æle de Biscoe qui sont des m√¢les.\nPour l‚Äôann√©e 2007, ne conserver que les pingouins dont la masse est sup√©rieure √† la moyenne.\nRetirez les lignes contenant des valeurs manquantes.\n\nCr√©er et modifier des variables : mutate()\n\nConvertissez l‚Äôunit√© des nageoires ‚Äòflipper_len‚Äô en cm.\nCr√©er un indicateur correspondant √† la longueur du bec (bill_len) divis√© par sa profondeur (bill_dep).\n\nR√©sum√© de DF : summarise()/group_by()\n\nCalculer la m√©diane et l‚Äôamplitude de bill_len.\nCalculer la m√©diane de chaque variable num√©rique.\nCalculer la m√©diane de la longueur du bec par esp√®ce\nCalculer la m√©diane de la longueur du bec par esp√®ce et par sexe.\n\nJointure de donn√©es :\n\nChargez les donn√©es : (cf. Section 4.1.1)\n\nDonn√©es g√©ographique : iris_29.gpkg\nDonn√©es INSEE : iris_brest.csv\n\nJoignez la donn√©e spatiale aux donn√©es INSEE (cf. Section 4.1.5).\n\n\n\n\n\n\n1.2.4 R√©f√©rences\nCheat sheet :\n\nRStudio\nBase R\ndplyr",
    "crumbs": [
      "Travaux dirig√©s",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introduction √† R et RStudio</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html",
    "href": "ressources/algorithmique/structure_donnees.html",
    "title": "2¬† Les structures de donn√©es",
    "section": "",
    "text": "2.1 Les variables\nLes structures de donn√©es de base sous R sont d√©crites dans la figure Figure¬†2.1.\nQuand on fait de l‚Äôanalyse de donn√©es sous R, on est surtout confront√© aux :\nLes arrays sont beaucoup moins courants.\nEn R, et dans les langages de programmation en g√©n√©rale, on stock des informations dans des objets sur lesquels on effectue des op√©rations. En R, l‚Äôobjet de base est la variable1. Cette derni√®re peut √™tre de diff√©rentes classes2. Les classes associ√©es aux variables sont : numeric, character et logical.\nUne variable de classe numeric correspond √† nombre ou un chiffre :\n# D√©finition de variables numeric\nn1 &lt;- 1\nn2 &lt;- 0.6\nn3 &lt;- -5.097\nn4 &lt;- 1e6 # √âcriture scientifique\nOn assigne une valeur en utilisant &lt;- ou = (on utilisera le &lt;- de pr√©f√©rence car il est idiomatique). Les lignes commen√ßant par # sont des commentaires. Ils sont extr√™mements importants car ils vous permettent d‚Äô√©crire librement du texte dans un script sans qu‚Äôil soit interpr√©t√© comme du code. Vous pouvez ainsi documenter votre code pour faciliter sa lecture par ceux qui le liront.\nPour afficher le contenue d‚Äôun objet, on l‚Äô√©crit dans la console ou on peut utiliser la fonction print() (imprimer) :\nn1\n\n[1] 1\n\nprint(n1)\n\n[1] 1\nPour v√©rifier la classe d‚Äôun objet, on utilise la fonction class() :\nclass(n1)\n\n[1] \"numeric\"\nLes variables de classe character enregistre une cha√Æne de caract√®res (comme un mot ou un code). Pour la d√©finir, on encadre la valeur par des guillemets simples '' ou doubles \"\" (utilisez plut√¥t les guillemets doubles).\n# D√©finition de variables character\nc1 &lt;- \"a\"\nc2 &lt;- \"arbre\"\nc3 &lt;- \"Une cha√Æne de caract√®res plus longue\"\nc4 &lt;- \"LKJHNA2000\"\nc5 &lt;- \"1\"\nVous voyez qu‚Äôun chiffre peut √™tre d√©fini comme un caract√®re s‚Äôil est encadr√© de guillemets.\nEnfin, la classe logical correspond √† des bool√©ens : TRUE et FALSE.\nb1 &lt;- TRUE\nb2 &lt;- FALSE",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html#sec-variables",
    "href": "ressources/algorithmique/structure_donnees.html#sec-variables",
    "title": "2¬† Les structures de donn√©es",
    "section": "",
    "text": "1¬†Dans les faits, il s‚Äôagit d‚Äôun abus de langage. En R, tout est objet, donc une variable n‚Äôexiste pas vraiment techniquement parlant. On utilise ce mot pour d√©signer les objets ne contenant qu‚Äôune seule valeur.2¬†Si vous avez d√©j√† fait de la programmation Orient√©e Objet (OO), vous devez trouver cela √©trange. En R, une classe n‚Äôest pas un objet au sens classique o√π on l‚Äôentend en OO mais une √©tiquette attach√©e √† un un objet.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBien nommer ses objets\n\n\n\nComme pour l‚Äô√©criture des noms de ses fichiers, il convient d‚Äôadopter une convention d‚Äô√©criture que vous utiliserez dans tous vos scripts.\nEn R, il n‚Äôy a pas concenssus sur la convention √† utiliser. Cependant, la majorit√© des personnes utilisent la snake case correspondant √† : ‚Äútout en miniscule et espace en underscore‚Äù. C‚Äôest la convention que je vous conseil d‚Äôutiliser :\n\n\nBien\n\nma_variable\ndata_1\ndata_merged\n\n\nNaze\n\nMaVariable\nData.1\ndataMerged\n\n\n\nPersonnelement, j‚Äôenfreint cette convention pour les constantes que j‚Äô√©crit en majuscule comme en python.",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html#sec-vector",
    "href": "ressources/algorithmique/structure_donnees.html#sec-vector",
    "title": "2¬† Les structures de donn√©es",
    "section": "2.2 Les vecteurs",
    "text": "2.2 Les vecteurs\nUn vecteur est un ensemble de variables de m√™me classe. On le d√©fini manuellement via la fonction c() (combine). Leur classe est similaire aux classes des variables.\n\n# Vecteur de type numeric\nvector_num &lt;- c(1, 2, 4, 5, 6)\nvector_num\n\n[1] 1 2 4 5 6\n\nclass(vector_num)\n\n[1] \"numeric\"\n\n# Vecteur de type character\nvector_str &lt;- c(\"pluie\", \"orage\", \"beau-temps\", \"pluie\", \"pluie\")\nvector_str\n\n[1] \"pluie\"      \"orage\"      \"beau-temps\" \"pluie\"      \"pluie\"     \n\nclass(vector_str)\n\n[1] \"character\"\n\n\nEn R, on a un type particulier de vecteur : les facteurs (factor). Il s‚Äôagit de vecteur de cha√Æne de caract√®re dont les modalit√©s labelis√©es. Par d√©faut, les labels correspondent au nom des modalit√©s elles-m√™mes.\n\nvector_str &lt;- c(\"peu\", \"moyen\", \"beaucoup\", \"peu\", \"peu\")\n(factor_vector &lt;- factor(vector_str))\n\n[1] peu      moyen    beaucoup peu      peu     \nLevels: beaucoup moyen peu\n\n\nUn des int√©r√™ts des facteurs est que l‚Äôon peut leur donner des labels diff√©rents :\n\n(factor_vector_labelled &lt;- factor(\n    vector_str,\n    levels = c(\"peu\", \"moyen\", \"beaucoup\"),\n    labels = c(\"Pluiviosit√© faible\", \"Pluviosit√© moyenne\", \"Pluviosit√© forte\")\n))\n\n[1] Pluiviosit√© faible Pluviosit√© moyenne Pluviosit√© forte   Pluiviosit√© faible\n[5] Pluiviosit√© faible\nLevels: Pluiviosit√© faible Pluviosit√© moyenne Pluviosit√© forte\n\n\nOn peut traiter les facteurs de la m√™me fa√ßon que les vecteurs de cha√Æne de caract√®res.\n\n2.2.1 Conversion de vecteurs\nOn peut convertir des vecteurs de la m√™me fa√ßon que l‚Äôon convertie des variables avec les fonctions as.&lt;class&gt; (par-ex. as.numeric()).\n\n# Conversion d'un vecteur num√©rique vecteur de cha√Æne de caract√®res\n(vector_num_str &lt;- as.character(vector_num))\n\n[1] \"1\" \"2\" \"4\" \"5\" \"6\"\n\nclass(vector_num_str)\n\n[1] \"character\"\n\n(factor_vector &lt;- as.factor(vector_num_str))\n\n[1] 1 2 4 5 6\nLevels: 1 2 4 5 6\n\nclass(factor_vector)\n\n[1] \"factor\"",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html#sec-structure-df",
    "href": "ressources/algorithmique/structure_donnees.html#sec-structure-df",
    "title": "2¬† Les structures de donn√©es",
    "section": "2.3 Les Data frame et d√©riv√©es",
    "text": "2.3 Les Data frame et d√©riv√©es\nUn Data Frame (DF) est un tableau de donn√©es o√π chaque colonne correspond √† un vecteur. Cela correspond √† ce que vous traitez d‚Äôordinaire sous excel.\nOn cr√©e un Data frame avec la fonction data.frame :\n\n(df &lt;- data.frame(\n  taille = c(185, 166, 180, 164, 173),\n  prenom = c(\"Franz\", \"Richard\", \"Johan Sebastian\", \"Ella\", \"Maria\"),\n  nom = c(\"Litz\", \"Wagner\", \"Bach\", \"Fitzgerald\", \"Callas\")\n))\n\n  taille          prenom        nom\n1    185           Franz       Litz\n2    166         Richard     Wagner\n3    180 Johan Sebastian       Bach\n4    164            Ella Fitzgerald\n5    173           Maria     Callas\n\n\n\n2.3.1 Acc√®s aux colonnes et aux lignes\nPour acc√©der √† un vecteur (une colonne) dans un DF, plusieurs possibilit√©s :\n\ndf$taille # Avec le $\ndf[[\"taille\"]] # avec [[]]\ndf[, \"taille\"] # avec la position\ndf[, 1] # avec l'index de la colonne\n\nOn utilise l‚Äôune ou l‚Äôautre des m√©thodes en fonction de la proc√©dure que l‚Äôon est entrain d‚Äôemployer. La m√©thode $ demeure la plus courante.\nPour acc√©der aux lignes, on utilise l‚Äôindex de la ligne. Si le DF a des noms de lignes, on peut √©galement utiliser ces noms.\n\n# Passer une colonne en nom de ligne\n(df &lt;- tibble::column_to_rownames(df, \"nom\"))\n\n           taille          prenom\nLitz          185           Franz\nWagner        166         Richard\nBach          180 Johan Sebastian\nFitzgerald    164            Ella\nCallas        173           Maria\n\n# Extraire la ligne par nom de ligne\ndf[\"Litz\", ]\n\n     taille prenom\nLitz    185  Franz\n\n\n\n\n2.3.2 Description d‚Äôun DF\nVous pouvez obtenir une description rapide de votre DF avec la fonction str(). Sur RStudio vous avez ces infos directement dans le panneau Environnement.\n\nstr(df)\n\n'data.frame':   5 obs. of  2 variables:\n $ taille: num  185 166 180 164 173\n $ prenom: chr  \"Franz\" \"Richard\" \"Johan Sebastian\" \"Ella\" ...\n\n\nDans le tableau ci-dessous, vous trouverez d‚Äôautres fonction qui permettent de d√©crire un DF.\n\n\n\n\n\n\n\n\nFonction\nPackage\nDescription\n\n\n\n\nstr()\nbase\nStructure g√©n√©rale, types des colonnes, aper√ßu des valeurs\n\n\nglimpse()\ndplyr\n√âquivalent de str() avec dplyr\n\n\nhead()\nbase\nPremi√®res lignes (aper√ßu des donn√©es, pas structurel)\n\n\ntail()\nbase\nDerni√®res lignes\n\n\nnames()\nbase\nNoms des colonnes\n\n\ndim()\nbase\nDimensions (lignes, colonnes)\n\n\nnrow()\nbase\nNombre de lignes\n\n\nncol()\nbase\nNombre de colonnes\n\n\n\n\n\n2.3.3 Les data frame spatiaux\nQuand on travail avec des donn√©es spatiales vectorielles, ce qui est le cas dans ce cours, on utilise une variante spatiale du Data frame qui est un objet sf issu du package sf.\n\n# Lecture d'un geopackage\npath &lt;- \"data/src/iris_29.gpkg\"\niris &lt;- sf::read_sf(path)\nclass(iris)\n\n[1] \"sf\"         \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\nIl s‚Äôagit d‚Äôun data.frame auquel une colonne qui enregistre la g√©om√©trie a √©t√© ajout√©e. Cette colonne est souvent nomm√©e geom ou geometry. L‚Äôobjet sf enregistre √©galement le syst√®me de coordonn√©es. Il est donc possible de r√©aliser des traitements spatiaux comme on le ferait sous QGIS.\n\n\n\n\n\n\nQuid des rasters\n\n\n\nIl est tout √† fait possible de traiter des rasters sous R, notamment avec le package terra. Comme nous n‚Äôen utilisons pas dans ce cours, je ne m‚Äô√©tend pas sur le sujet.\n\n\n\n\n2.3.4 Donn√©es massives\nDans le cas de donn√©es massives, on pourra se tourner vers le package data.table qui poss√®de sa propre syntaxe. Notez qu‚Äôon peut maintenant utilisez la syntaxe dplyr avec data.table en utilisant dtplyr ce qui est un tr√®s gros poulet.\n\nlibrary(data.table)\nlibrary(dtplyr)\n\n# Cr√©er un objet\nldt &lt;- lazy_dt(mtcars)\n\nldt |&gt;\n  group_by(cyl) |&gt;\n  summarise(mpg = sum(mpg))\n\nSource: local data table [3 x 2]\nCall:   `_DT1`[, .(mpg = sum(mpg)), keyby = .(cyl)]\n\n    cyl   mpg\n  &lt;dbl&gt; &lt;dbl&gt;\n1     4  293.\n2     6  138.\n3     8  211.\n\n# Use as.data.table()/as.data.frame()/as_tibble() to access results",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html#les-matrices",
    "href": "ressources/algorithmique/structure_donnees.html#les-matrices",
    "title": "2¬† Les structures de donn√©es",
    "section": "2.4 Les matrices",
    "text": "2.4 Les matrices\nLes matrices sont notamment utilis√©es dans les fonctions orient√©es statistiques. C‚Äôest tout naturel car l‚Äôalg√®bre lin√©aire et les probabilit√©s sont bas√©es sur des tels objets math√©matiques.\nPar exemple, dans le cas d‚Äôune r√©gression lin√©aire dont les \\(\\beta\\) sont estim√©s par la m√©thode des moindres carr√©s ordinaires (OLS), les donn√©es sont stock√©es dans une matrice :\n\n# G√©n√©ration de y\ny &lt;- mtcars$mpg\nX &lt;- model.matrix(mpg ~ ., data = mtcars)\n\n# Estimations des betas\nXtX_inv &lt;- solve(t(X) %*% X) # (X^T X)^(-1)\nXtY &lt;- t(X) %*% y            # (X^T y)\nbeta_hat &lt;- XtX_inv %*% XtY  # beta = (X^T X)^(-1) X^T y",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_donnees.html#les-listes",
    "href": "ressources/algorithmique/structure_donnees.html#les-listes",
    "title": "2¬† Les structures de donn√©es",
    "section": "2.5 Les listes",
    "text": "2.5 Les listes\nVoil√† une liste imbriqu√©es (nested list) :\n\ngaziers &lt;- list(\n  \"Taylor Swift\" = list(\"argent\" = 30, \"niveau_de_poulet\"=1),\n  \"Bach\" = list(\"argent\" = 5, \"niveau_de_poulet\"=Inf),\n  \"Charlie Parker\" = list(\"argent\" = 1, \"niveau_de_poulet\"=1e6)\n)",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Les structures de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_controle.html",
    "href": "ressources/algorithmique/structure_controle.html",
    "title": "3¬† Les structures de contr√¥le",
    "section": "",
    "text": "3.1 Les alternatives\nLes alternatives permettent d‚Äôeffectuer une op√©ration uniquement si une condition logique est remplie. L‚Äôalternative la plus couramment utilis√©e dans les langages de haut-niveau est le if-else.\nEn R, on utilise la syntaxe suivante :\nx &lt;- \"bleu\"\nif (x %in% c(\"bleu\", \"rouge\", \"jaune\")) {\n  cat(x, \"est une couleur primaire\\n\")\n} else {\n  cat(x, \"n'est pas une couleur primaire\\n\")\n}\n\nbleu est une couleur primaire\nLe if-else peut √™tre √©tendu √† plusieurs tests.\nCe qui en R donne :\nx &lt;- \"violet\"\nif (x %in% c(\"bleu\", \"rouge\", \"jaune\")) {\n  cat(x, \"est une couleur primaire\\n\")\n} else if (x %in% c(\"violet\", \"vert\", \"orange\")) {\n  cat(x, \"est une couleur secondaire\\n\")\n} else {\n  cat(x, \"n'est ni une couleur primaire, ni une couleur secondaire\\n\")\n}\n\nviolet est une couleur secondaire\nEn R, il existe une fonction pour le if-else :\nx &lt;- 1\nres &lt;- ifelse(\n  x &gt; 0,     # La condition\n  \"positif\", # Si vrai\n  \"n√©gatif\"  # Sinon\n)\nprint(res)\n\n[1] \"positif\"",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Les structures de contr√¥le</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_controle.html#les-alternatives",
    "href": "ressources/algorithmique/structure_controle.html#les-alternatives",
    "title": "3¬† Les structures de contr√¥le",
    "section": "",
    "text": "SI Test\n   Instruction 1\nSINON\n   Instruction 2\nFIN SI\n\n\n\nSI Test 1\n   Instruction 1\nSINONSI Test 2\n   Instruction 2\nSINON\n   Instruction 3\nFIN SI",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Les structures de contr√¥le</span>"
    ]
  },
  {
    "objectID": "ressources/algorithmique/structure_controle.html#les-boucles",
    "href": "ressources/algorithmique/structure_controle.html#les-boucles",
    "title": "3¬† Les structures de contr√¥le",
    "section": "3.2 Les boucles",
    "text": "3.2 Les boucles\nLes boucles permettent d‚Äôeffectuer des op√©rations plusieurs de fois de suite de mani√®re control√©e. Il y en a plusieurs sortes. Dans le cas de traitements de donn√©es sous R, vous serez surtout int√©ress√© par la boucle de parcours qui est √©x√©cut√©e sur chacun des √©l√©ments d‚Äôune liste.\nPOURCHAQUE valeur DANS collection\n   Instruction 1\nFIN POURCHAQUE\nEn R, cela se traduit par :\n\ncouleur_primaire &lt;- c(\"bleu\", \"rouge\", \"jaune\")\nfor (couleur in couleur_primaire) {\n  cat(couleur, \"\\n\")\n}\n\nbleu \nrouge \njaune \n\n\nOn peut r√©aliser des boucles imbriqu√©es :\n\nsequence &lt;- 2:4\nfor (i in sequence) {\n  for (j in sequence) {\n    cat(i, \"/\", j, \"= \")\n    cat(i / j, \"\\n\")\n  }\n}\n\n2 / 2 = 1 \n2 / 3 = 0.6666667 \n2 / 4 = 0.5 \n3 / 2 = 1.5 \n3 / 3 = 1 \n3 / 4 = 0.75 \n4 / 2 = 2 \n4 / 3 = 1.333333 \n4 / 4 = 1 \n\n\nIl arrive que l‚Äôon veuille stopper la boucle au cours de son ex√©cution ou tout simplement passer √† l‚Äô√©l√©ment suivant de la liste. Pour cela, on utilise les mots-cl√©s break et next.\n\ncouleur_primaire &lt;- c(\"bleu\", \"rouge\", \"jaune\")\nfor (couleur in couleur_primaire) {\n  if (couleur == \"bleu\") {\n    cat(\"J'aime pas le\", couleur, \"je passe...\\n\")\n    next # passer √† l'√©l√©ment suivant\n  } else if (couleur == \"rouge\") {\n    cat(\"Du\", couleur, \"je panique !!! j'me tire...\\n\")\n    break # briser la boucle\n  }\n  cat(couleur, \"\\n\")\n}\n\nJ'aime pas le bleu je passe...\nDu rouge je panique !!! j'me tire...\n\n\nOn voit que jaune n‚Äôest jamais affich√© car la boucle est bris√©e avant que le jaune puisse √™tre affich√©.\n\n3.2.1 purrr et la programmation fonctionnelle\n\npacman::p_load(purrr, dplyr)\n\nLes boucles for sont :\n\nVerbeuses (longues √† √©crire)\nSujettes √† pas mal d‚Äôerreurs (error-prone)\nPeu performantes\n\nDans ce cadre, le package purrr a √©t√© con√ßu pour optimiser l‚Äô√©criture de boucle dans un paradigme de programmation fonctionnelle. Pour faire simple, l‚Äôid√©e est que chaque √©tape du code est r√©alis√©e par l‚Äôappele d‚Äôune fonction qui ne retourne qu‚Äôun seul r√©sultat.\nPour illustrer le principe, prenant un example de boucle qui, pour chaque valeur d‚Äôun vecteur num√©rique, calcul son carr√© et ajoute le r√©sultat dans un vecteur pr√©alablement instanti√© :\n\n# D√©finition de la donn√©e\nseq &lt;- 1:5\n\n# Instantiation d'un vecteur pour stocker les r√©sultat\nres &lt;- vector()\n\n# La boucle\nfor (i in seq) {\n  # Calcul du carr√©\n  square &lt;- i ^ 2\n\n  # Stockage du r√©sultat\n  res &lt;- c(res, square)\n}\n\nprint(res)\n\n[1]  1  4  9 16 25\n\n\nAvec purrr, l‚Äôop√©ration est consid√©r√©e comme l‚Äôapplication d‚Äôune fonction qui retourne une liste de valeurs. Cette liste est ensuite convertie en vecteur via list_c().\n\n# D√©finition de la donn√©e\nseq &lt;- 1:5\n\n# Application de la fonction\nres &lt;- map(seq, \\(i) i ^ 2) |&gt;\n    list_c() # conversion de la liste en vecteur\n\nprint(res)\n\n[1]  1  4  9 16 25\n\n\nPour rendre la chose encore plus claire, on pourrait √©crire la fonction du carr√© et la passer directement √† la fonction map() :\n\n# Fonction du carr√©\nsquare &lt;- function(x) {\n  return(x ^ 2)\n}\n\n# D√©finition de la donn√©e\nseq &lt;- 1:5\n\n# Application de la fonction\nres &lt;- map(seq, square) |&gt;\n    list_c() # conversion de la liste en vecteur\n\nprint(res)\n\n[1]  1  4  9 16 25\n\n\nAu final, le code est plus structur√©, lisible et coh√©rent.\nPrenons un exemple plus parlant pour du traitement des donn√©es. Imaginons que l‚Äôon dispose de plusieurs data.frame dans une liste et que l‚Äôon souhaite r√©aliser une r√©gression lin√©aire sur ces diff√©rentes sources de donn√©es et r√©cup√©rer le \\(R^2\\) pour chacune.\n\n# Donn√©es d'entra√Ænement de dplyr, s√©par√©e par CYL (4, 6 et 8)\ndata_list &lt;- split(mtcars, mtcars$cyl)\n\nr_squared &lt;-\n  # Application de la r√©gression lin√©aire\n  map(data_list, \\(df) lm(mpg ~ wt, data = df)) |&gt;\n  # Application du r√©sum√© sur les objets lm\n  map(summary) |&gt;\n  # R√©cup√©rer les R2 sous forme de vecteur num√©rique nomm√©e par valeur du CYL\n  map_dbl(\"r.squared\")\n\nprint(r_squared)\n\n        4         6         8 \n0.5086326 0.4645102 0.4229655 \n\n\nVous me direz qu‚Äôune fonction peut prendre plusieurs arguments en entr√©e. Effectivement, c‚Äôest pourquoi purrr dispose d‚Äôune fonction map2() qui it√®re sur 2 listes d‚Äôarguments simultan√©ment. √Ä plus de 2 listes d‚Äôarguments, on utilise la fonction pmap().\n\n# Ajust√© des mod√®les lin√©aires\nmods &lt;- map(data_list, \\(df) lm(mpg ~ wt, data = df))\n\n# Faire une pr√©diction (predict()) avec les mod√®les pr√©alablement ajust√©s (mods)\n# sur les donn√©es s√©par√©es (data_list)\nmap2(mods, data_list, predict)\n\n$`4`\n    Datsun 710      Merc 240D       Merc 230       Fiat 128    Honda Civic \n      26.47010       21.55719       21.78307       27.14774       30.45125 \nToyota Corolla  Toyota Corona      Fiat X1-9  Porsche 914-2   Lotus Europa \n      29.20890       25.65128       28.64420       27.48656       31.02725 \n    Volvo 142E \n      23.87247 \n\n$`6`\n     Mazda RX4  Mazda RX4 Wag Hornet 4 Drive        Valiant       Merc 280 \n      21.12497       20.41604       19.47080       18.78968       18.84528 \n     Merc 280C   Ferrari Dino \n      18.84528       20.70795 \n\n$`8`\n  Hornet Sportabout          Duster 360          Merc 450SE          Merc 450SL \n           16.32604            16.04103            14.94481            15.69024 \n        Merc 450SLC  Cadillac Fleetwood Lincoln Continental   Chrysler Imperial \n           15.58061            12.35773            11.97625            12.14945 \n   Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird \n           16.15065            16.33700            15.44907            15.43811 \n     Ford Pantera L       Maserati Bora \n           16.91800            16.04103 \n\n\nEt avec pmap() :\n\nx &lt;- list(1, 1, 1)\ny &lt;- list(10, 20, 30)\nz &lt;- list(100, 200, 300)\n\npmap(list(x, y, z), \\(first, second, third) (first + third) * second)\n\n[[1]]\n[1] 1010\n\n[[2]]\n[1] 4020\n\n[[3]]\n[1] 9030\n\n\n\n\n\n\n\n\nImportant\n\n\n\nM√™me si la programmation fonctionnelle propos√©e par purrr est tr√®s attrayante, il demeure indispensable de savoir √©crire une boucle classique. Il s‚Äôagit d‚Äôune des briques de base en programmation.\n\n\n\n\n\n\n\n\nQuid de lapply(), sapply(), etc.\n\n\n\nQuand vous ferez vos recherches sur internet, vous verrez souvent passer les fonctions lapply, sapply(), tapply() et autres apply(). Ces fonctions fonctionnent de mani√®re assez similaires aux fonctions propos√©es par purrr mais viennent par d√©faut sous R.\nJe vous encourage √† utiliser purrr car ses fonctions sont plus coh√©rentes entre elles. De plus, le package vient avec de nombreux ‚Äúpetits plus‚Äù tr√®s agr√©ables au quotidien.\nSi vous √™tes int√©ress√©s par la question, vous pouvez lire ce biais sur stackoverflow.\n\n\nRessources :\n\nblogpost pas mal sur purrr\nCheat sheet de purrr",
    "crumbs": [
      "Algorithmique",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Les structures de contr√¥le</span>"
    ]
  },
  {
    "objectID": "ressources/data_process/data_basic.html",
    "href": "ressources/data_process/data_basic.html",
    "title": "4¬† Traitement de donn√©es sous R",
    "section": "",
    "text": "4.1 Manipulation de Data Frames\nOn fera surtout du dplyr dans la mesure o√π la syntaxe est plus simple √† appr√©hender que le base R.\nPrenons un example avec le jeu de donn√©es palmerpenguins.\nIl contient des informations sur trois esp√®ces de manchots observ√©es dans l‚Äôarchipel de Palmer en Antarctique : Adelie, Chinstrap et Gentoo.\nAssurez-vous de bien comprendre la structure de donn√©es d‚Äôun Data Frame avant de lire cette section (cf. Section 2.3).",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Traitement de donn√©es sous R</span>"
    ]
  },
  {
    "objectID": "ressources/data_process/data_basic.html#sec-manip-df",
    "href": "ressources/data_process/data_basic.html#sec-manip-df",
    "title": "4¬† Traitement de donn√©es sous R",
    "section": "",
    "text": "4.1.1 Lire et √©crire des Data Frames\nPour lire des DF √† partir de fichiers csv1, on utilise la fonction de R base read.csv() dont l‚Äô√©quivalent en tydiverse est la fonction read_csv() du package readr. Je vous conseil d‚Äôutiliser la fonction readr::read_csv() car elle plus optimiser que la premi√®re.\n1¬†On peut obtenir des DF √† partir de fichiers autre que csv. Je me concentre sur ce format car il s‚Äôagit du plus courant. Si vous voulez lire des donn√©es √† partir d‚Äôun fichier xls/xlsw vous pouvez utiliser le package read_excel. Je ne vous le conseil pas car les fichiers excel sont souvent tr√®s mal mis en forme en plus de contenir des feuilles. Il vaut mieux en extraire des csv propres.\n\n\n\n\n\nLe format csv\n\n\n\nLe format csv est un des formats les plus utilis√© pour stocker des donn√©es tabulaires en data science. csv signifie Comma Separated Values (comma signifie virgule). Donc, dans la majorit√© des cas, un fichier csv sera de la forme :\nvar_1,var_2\n12,0.9\n2,0.25\n4,0.78\nEn Europe, on utilise souvent la virgule pour repr√©senter le s√©parateur d√©cimal. Le s√©parateur de valeurs du fichier csv devient alors le ;. Le fichier devient alors :\nvar_1;var_2\n12;0,9\n2;0,25\n4;0,78\nVous trouvez aussi des fichiers csv s√©par√© par des tabulations (on parle de tsv. C‚Äôest surtout le cas pour les fichiers contenants du texte long car la virgule et le point virgule peuvent se rencontrer dans le texte.\n\n\n\n\n\n\n\n\nAttention\n\n\n\nUn fichier csv ne doit jamais avoir des informations avant la premi√®re ligne qui indique le nom des colonnes. Par exemple, le fichier suivant ne sera pas lu correctement.\nFichier √©crit le 2025/05/02.\nvars_1 : longueur (cm)\nvars_2 : poid (g)\nvar_1;var_2\n12;0,9\n2;0,25\n4;0,78\nCela veut dire qu‚Äôun fichier csv ne doit contenir que les donn√©es et jamais les m√©tadonn√©es ou autres informations. Bien √©videmment, si vous √©crivez des donn√©es et que vous voulez les partager il faut toujours √©crire les m√©tadonn√©es, mais vous les √©crirez dans un fichier s√©par√©.\n\n\nAvant de charger un fichier csv, il faut conna√Ætre le format employ√© : quel s√©parateur de valeur et quel s√©parateur de d√©cimal est employ√©. Pour cela, il suffit d‚Äôouvrir d‚Äôinspecter le fichier. Vous pouvez tout simplement essayer de l‚Äôouvrir sous R et regarder le r√©sultat. Sinon, vous pouvez ouvrir le fichier dans un logiciel externe (par exemple avec le notepad comme les csv sont des fichiers textuelles brutes).\n\n\n\n\n\n\n\n\n\nType de fichier\nS√©parateur de colonnes\nS√©parateur d√©cimal\nFonction readr\n\n\n\n\nCSV standard\n,\n.\nread_csv()\n\n\nCSV2 (Europe)\n;\n,\nread_csv2()\n\n\nTSV\n\\t (tabulation)\n.\nread_tsv()\n\n\nALL\nargument delim\nargument locale (decimal_mark)\nread_delim()\n\n\n\nPar exemple :\n\npath &lt;- \"data/src/iris_brest.csv\"\ndf &lt;- readr::read_csv(path)\n\nRows: 90 Columns: 115\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr   (4): Libell√© commune ou ARM, TRIRIS, Libell√© de l'IRIS, Type d'IRIS\ndbl (111): IRIS, R√©gion, D√©partement, Unit√© urbaine, Commune ou ARM, Grand q...\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nLa fonction readr::read_csv() renvoie directement des informations sur la classe des colonnes. Cela vous permet de voir rapidement si elles sont bien interpr√©t√©es.\nPour √©crire un fichier csv, vous pouvez utisez la fonction readr::write_csv(). Elle prend un data.frame en entr√©e et le chemin vers le fichier de destination. Je vous conseil d‚Äôutiliser la fonction avec les arguments par d√©faut, donc avec un s√©parateur virgule et un s√©parateur de d√©cimale point. De cette fa√ßon, vous aurez toujours le format de csv et vous vous y retrouverez plus facilement.\n\noutput_path &lt;- \"data/res/output.csv\"\nreadr::write_csv(df_res, output_path)\n\n\n\n\n\n\n\nLire et √©crire des donn√©es spatiales vectorielles\n\n\n\nQuand on travail avec des donn√©es spatiales vectorielles, ce qui est le cas dans ce cours, on utilise une variante spatiale du Data frame qui est un objet sf issu du package sf.\nAvec sf, on peut lire tous les types de fichiers spatiaux vectoriels (par-ex, shapefile, geopackage, etc.). On utilise la fonction read_sf().\n\n# Lecture d'un geopackage\npath &lt;- \"data/src/iris_29.gpkg\"\niris &lt;- sf::read_sf(path)\nclass(iris)\n\n[1] \"sf\"         \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\nSi vous voulez lire un shapefile, vous indiquerez le chemin du fichier .shp, sf fera le lien avec les autres fichiers.\nOn √©crit des donn√©es spatiales √† partir d‚Äôun objet sf avec la fonction write_sf(). La fonction ‚Äúdevine‚Äù le format attendu √† partir de l‚Äôextension que vous donnez au fichier :\n\n# √âcriture d'un fichier geopackage\npath &lt;- \"data/res/output.gpkg\"\nsf::write_sf(sf_res, path)\n\n\n\n\n\n4.1.2 Un framework pour la manipulation de donn√©es : dplyr\ndplyr est un framework du tidyverse en R con√ßu pour faciliter la manipulation de donn√©es de mani√®re claire, coh√©rente et efficace. Il repose sur une syntaxe intuitive et un petit ensemble de verbes coh√©rents qui correspondent aux op√©rations les plus courantes en analyse de donn√©es, comme :\n\nselect() pour choisir des colonnes,\nfilter() pour filtrer les lignes,\nmutate() pour cr√©er ou modifier des variables,\nsummarise() pour r√©sumer les donn√©es,\narrange() pour trier les observations,\net group_by() pour travailler par groupes.\n\nCes verbes peuvent √™tre reli√©s les uns aux autres par un pipe (|&gt; ou %&gt;%). Ce dernier prend le r√©sultat de la fonction pr√©c√©dente comme tableau d‚Äôenttr√©e. Par exemple :\n\npenguins |&gt;\n    select(island, species, bill_len, year) |&gt;\n    filter(year &gt; 2007) |&gt;\n    group_by(island, species) |&gt;\n    summarise(mean_bill_len = mean(bill_len, na.rm = TRUE))\n\n`summarise()` has grouped output by 'island'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 5 √ó 3\n# Groups:   island [3]\n  island    species   mean_bill_len\n  &lt;fct&gt;     &lt;fct&gt;             &lt;dbl&gt;\n1 Biscoe    Adelie             39.2\n2 Biscoe    Gentoo             47.7\n3 Dream     Adelie             38.2\n4 Dream     Chinstrap          48.9\n5 Torgersen Adelie             39.0\n\n\n\n\n4.1.3 S√©lectionner, filtrer, modifier et trier\n\n4.1.3.1 S√©lectionner des donn√©es\nPour s√©lectionner une variable sp√©cifique, on utilise la fonction homonime select().\n\nselected &lt;- select(penguins, species, island, body_mass)\nhead(selected)\n\n  species    island body_mass\n1  Adelie Torgersen      3750\n2  Adelie Torgersen      3800\n3  Adelie Torgersen      3250\n4  Adelie Torgersen        NA\n5  Adelie Torgersen      3450\n6  Adelie Torgersen      3650\n\n\n√Ä l‚Äôinverse, pour supprimer des variables, on place un - devant la variable :\n\nselected &lt;- select(penguins, -species, -island, -body_mass)\nhead(selected)\n\n  bill_len bill_dep flipper_len    sex year\n1     39.1     18.7         181   male 2007\n2     39.5     17.4         186 female 2007\n3     40.3     18.0         195 female 2007\n4       NA       NA          NA   &lt;NA&gt; 2007\n5     36.7     19.3         193 female 2007\n6     39.3     20.6         190   male 2007\n\n\nOn peut employer une expression de s√©lection pour choisir des variables par rapport √† une condition. Par exemple, si on veut s√©lectionner toutes les variables dont le nom se termine par une chaine de caract√®re pr√©cise, on peut utiliser la fonction ends_with() dans la fonction select() :\n\nselected &lt;- select(penguins, ends_with(\"len\"))\nhead(selected)\n\n  bill_len flipper_len\n1     39.1         181\n2     39.5         186\n3     40.3         195\n4       NA          NA\n5     36.7         193\n6     39.3         190\n\n\n\n\n\n\n\n\nPlus d‚Äôexamples\n\n\n\n\n\nSi on a une id√©e pr√©cise des variables que l‚Äôon veut s√©lectionner, on peut utiliser un vecteur de contenant les noms des variables et utiliser la fonction all_of() :\n\nto_select &lt;- c(\"island\", \"species\", \"body_mass\")\nselected &lt;- select(penguins, all_of(to_select))\nhead(selected)\n\n     island species body_mass\n1 Torgersen  Adelie      3750\n2 Torgersen  Adelie      3800\n3 Torgersen  Adelie      3250\n4 Torgersen  Adelie        NA\n5 Torgersen  Adelie      3450\n6 Torgersen  Adelie      3650\n\n\nBien s√ªr, on peut les combiner :\n\nselected &lt;- select(penguins, starts_with(\"bill\"), where(is.factor))\nhead(selected)\n\n  bill_len bill_dep species    island    sex\n1     39.1     18.7  Adelie Torgersen   male\n2     39.5     17.4  Adelie Torgersen female\n3     40.3     18.0  Adelie Torgersen female\n4       NA       NA  Adelie Torgersen   &lt;NA&gt;\n5     36.7     19.3  Adelie Torgersen female\n6     39.3     20.6  Adelie Torgersen   male\n\n\n\n\n\nVoil√† un tableau r√©capitulatif des expressions les plus communes que l‚Äôon peut utiliser pour s√©lectionner des variables.\n\n\n\n\n\n\n\n\n\nFonction\nDescription\nExemple\n\n\n\n\n\nstarts_with(\"x\")\nS√©lectionne les variables dont le nom commence par \"x\"\nselect(starts_with(\"Sepal\"))\n\n\n\nends_with(\"x\")\nS√©lectionne les variables dont le nom se termine par \"x\"\nselect(ends_with(\"Width\"))\n\n\n\ncontains(\"x\")\nS√©lectionne les variables dont le nom contient \"x\"\nselect(contains(\"Petal\"))\n\n\n\nall_of(vars)\nS√©lectionne toutes les colonnes list√©es dans un vecteur vars (et renvoie une erreur si une manque)\nselect(all_of(c(\"Species\", \"Sepal.Length\")))\n\n\n\neverything()\nS√©lectionne toutes les colonnes (utile pour repositionner)\nselect(Species, everything())\n\n\n\nwhere(predicate)\nS√©lectionne selon un type ou une condition logique sur les colonnes\nselect(where(is.numeric)), select(where(~mean(.) &gt; 0))\n\n\n\n\n\n\n4.1.3.2 filtrer des donn√©es\nPour filtrer les donn√©es avec dplyr on utilise la fonction homonyme filter(). Cette derni√®re filtre les lignes par v√©rification de conditions.\nPar exemple, si on veut r√©cup√©rer uniquement les donnn√©es pour l‚Äôesp√®ce Adelie :\n\nfiltered &lt;- filter(penguins, species == \"Adelie\")\nhead(filtered)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     40.3     18.0         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n6  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n\n\nOu si on souhaite r√©cup√©rer les observations pour les ann√©es post√©rieur √† 2007.\n\nfiltered &lt;- filter(penguins, year &gt; 2007)\nhead(filtered)\n\n  species island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Biscoe     39.6     17.7         186      3500 female 2008\n2  Adelie Biscoe     40.1     18.9         188      4300   male 2008\n3  Adelie Biscoe     35.0     17.9         190      3450 female 2008\n4  Adelie Biscoe     42.0     19.5         200      4050   male 2008\n5  Adelie Biscoe     34.5     18.1         187      2900 female 2008\n6  Adelie Biscoe     41.4     18.6         191      3700   male 2008\n\n\nOn peut combiner les filtres :\n\nfiltered &lt;- filter(penguins, year &gt; 2007, species == \"Adelie\")\nhead(filtered)\n\n  species island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Biscoe     39.6     17.7         186      3500 female 2008\n2  Adelie Biscoe     40.1     18.9         188      4300   male 2008\n3  Adelie Biscoe     35.0     17.9         190      3450 female 2008\n4  Adelie Biscoe     42.0     19.5         200      4050   male 2008\n5  Adelie Biscoe     34.5     18.1         187      2900 female 2008\n6  Adelie Biscoe     41.4     18.6         191      3700   male 2008\n\n\nSouvent, on faire s√©lectionner des donn√©es dans une gamme de valeurs, il suffit de faire :\n\nfiltered &lt;- filter(penguins, bill_len &gt; 35, bill_len &lt; 40)\nhead(filtered)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n4  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n5  Adelie Torgersen     38.9     17.8         181      3625 female 2007\n6  Adelie Torgersen     39.2     19.6         195      4675   male 2007\n\n\n\n\n\n\n\n\nPlus d‚Äôexamples\n\n\n\n\n\nPlut√¥t que d‚Äôutiliser des virgules pour s√©parer les filtres on peut utiliser une syntaxe bool√©enne (je ne vous le conseil pour d√©buter) :\n\nfiltered &lt;- filter(\n    penguins,\n    (\n        (species == \"Gentoo\" | species == \"Adelie\") &\n        body_mass &gt; mean(body_mass, na.rm = TRUE)\n    )\n)\nhead(filtered)\n\n  species    island bill_len bill_dep flipper_len body_mass  sex year\n1  Adelie Torgersen     39.2     19.6         195      4675 male 2007\n2  Adelie Torgersen     42.0     20.2         190      4250 &lt;NA&gt; 2007\n3  Adelie Torgersen     34.6     21.1         198      4400 male 2007\n4  Adelie Torgersen     42.5     20.7         197      4500 male 2007\n5  Adelie     Dream     39.8     19.1         184      4650 male 2007\n6  Adelie     Dream     44.1     19.7         196      4400 male 2007\n\n\nPour filter les modalit√©s de facteurs ou de chaines de caract√®res, on peut utiliser l‚Äôop√©rateur %in%.\n\nfiltered &lt;- filter(penguins, species %in% c(\"Gentoo\", \"Adelie\"))\nhead(filtered)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     40.3     18.0         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n6  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n\n\nPour r√©cup√©rer l‚Äôinverse d‚Äôune condition, on utilise le point d‚Äôexclamation !.\n\nfiltered &lt;- filter(penguins, !species %in% c(\"Gentoo\", \"Adelie\"))\nhead(filtered)\n\n    species island bill_len bill_dep flipper_len body_mass    sex year\n1 Chinstrap  Dream     46.5     17.9         192      3500 female 2007\n2 Chinstrap  Dream     50.0     19.5         196      3900   male 2007\n3 Chinstrap  Dream     51.3     19.2         193      3650   male 2007\n4 Chinstrap  Dream     45.4     18.7         188      3525 female 2007\n5 Chinstrap  Dream     52.7     19.8         197      3725   male 2007\n6 Chinstrap  Dream     45.2     17.8         198      3950 female 2007\n\n\n\n\n\nTableau r√©capitulatif\n\n\n\n\n\n\n\n\n\n\nCat√©gorie\nFonction / op√©rateur\nDescription\nExemple\n\n\n\n\nComparaison num√©rique\n==, !=\n√âgal / diff√©rent\nfilter(Species == \"setosa\")\n\n\n\n&gt;, &lt;, &gt;=, &lt;=\nSup√©rieur, inf√©rieur, etc.\nfilter(Sepal.Length &gt; 6)\n\n\nAppartenance\n%in%\nAppartient √† un ensemble de valeurs\nfilter(Species %in% c(\"setosa\", \"virginica\"))\n\n\n\n!x %in% ...\nN‚Äôappartient pas √†‚Ä¶\nfilter(!Species %in% \"setosa\")\n\n\nTexte / cha√Ænes\nstr_detect(x, \"mot\")\nContient un motif (n√©cessite stringr)\nfilter(str_detect(Species, \"osa\"))\n\n\n\nstartsWith(x, \"mot\")\nCommence par‚Ä¶\nfilter(startsWith(Species, \"set\"))\n\n\n\nendsWith(x, \"mot\")\nSe termine par‚Ä¶\nfilter(endsWith(Species, \"ica\"))\n\n\nValeurs manquantes\nis.na(x)\nEst manquant\nfilter(is.na(Sepal.Length))\n\n\n\n!is.na(x)\nN‚Äôest pas manquant\nfilter(!is.na(Sepal.Length))\n\n\nIntervalles\nbetween(x, a, b)\nValeur comprise entre a et b (inclusif)\nfilter(between(Sepal.Length, 5, 6))\n\n\nConditions complexes\nif_else() ou logique combin√©e\nChoix conditionnels\nfilter(if_else(Sepal.Width &gt; 3, TRUE, FALSE))\n\n\n\n\n\n\n4.1.3.3 Modifier des donn√©es\nPour modifier des donn√©es ou en rajouter, on utilise la fonction mutate().\nPar exemple, si on veut faire un arrondi de la variable bill_len.\n\nmutated &lt;- mutate(penguins, bill_len = round(bill_len))\nhead(mutated$bill_len)\n\n[1] 39 40 40 NA 37 39\n\n\nPlut√¥t que d‚Äô√©crire par-dessus la variable bill_len, on peut vouloir cr√©er une autre variable pour enregistrer la modification. On √©crit simplement le nom de la nouvelle variable √† gauche du = :\n\nmutated &lt;- mutate(penguins, bill_len_round = round(bill_len))\nhead(mutated$bill_len_round)\n\n[1] 39 40 40 NA 37 39\n\n\nOn peut faire des op√©rations qui utilisent plusieurs variables :\n\nmutated &lt;- mutate(penguins, bill_len_norm_mass = bill_len / body_mass)\nhead(mutated$bill_len_norm_mass)\n\n[1] 0.01042667 0.01039474 0.01240000         NA 0.01063768 0.01076712\n\n\nOn peut modifier de fa√ßon conditionnelle nos variables. Par exemple, si on veut arrondir uniquement la variable bill_len pour les esp√®ces Adelie alors, on peut utiliser la fonction ifelse() :\n\nmutated &lt;- mutate(\n    penguins,\n    bill_len_round = ifelse(species == \"Adelie\", round(bill_len), bill_len)\n)\n\nQuand on a plus d‚Äôune condition √† v√©rifier, on privil√©giera la fonction case_when() :\n\nmutated &lt;- mutate(\n    penguins,\n    geo_code = case_when(\n        island == \"Biscoe\" ~ \"North\",\n        island == \"Torgersen\" ~ \"Midlle\",\n        TRUE ~ \"South\" # quand les deux premi√®res ne sont pas v√©rifi√©es\n    )\n)\n\nSi on souhaite modifier un ensemble de variables r√©pondant √† un ou des caract√®res communs, on peut utiliser la fonction across(). Par exemple, si on veut arrondir toutes les variables num√©riques, on √©crira :\n\nmutated &lt;- mutate(penguins, across(where(is.numeric), ~round(.x)))\nhead(mutated)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen       39       19         181      3750   male 2007\n2  Adelie Torgersen       40       17         186      3800 female 2007\n3  Adelie Torgersen       40       18         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen       37       19         193      3450 female 2007\n6  Adelie Torgersen       39       21         190      3650   male 2007\n\n\nIl arrive que l‚Äôon souhaite modifier des variables ou en cr√©er de nouvelles par groupe. Par exemple, on peut vouloir normaliser bill_len par la moyenne de body_mass par esp√®ce. Dans ce cadre, on utilisera la fonction group_by() qui permet d‚Äôeffectuer des op√©rations par groupe.\n\nmutated &lt;- penguins |&gt;\n    group_by(species) |&gt;\n    mutate(norm_bill_len = bill_len / mean(body_mass))\n\n\n\n4.1.3.4 Trier les donn√©es\nPour trier les donn√©es, on utilise la fonction arrange(). Par exemple, si on veut ordonner le tableau par bill_len :\n\narranged &lt;- arrange(penguins, bill_len)\nhead(arranged)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie     Dream     32.1     15.5         188      3050 female 2009\n2  Adelie     Dream     33.1     16.1         178      2900 female 2008\n3  Adelie Torgersen     33.5     19.0         190      3600 female 2008\n4  Adelie     Dream     34.0     17.1         185      3400 female 2008\n5  Adelie Torgersen     34.1     18.1         193      3475   &lt;NA&gt; 2007\n6  Adelie Torgersen     34.4     18.4         184      3325 female 2007\n\n\nPar d√©faut l‚Äôordre est croissant. Pour trier de fa√ßon d√©croissante, on utilise place la fonction desc() sur la variable :\n\narranged &lt;- arrange(penguins, desc(bill_len))\nhead(arranged)\n\n    species island bill_len bill_dep flipper_len body_mass    sex year\n1    Gentoo Biscoe     59.6     17.0         230      6050   male 2007\n2 Chinstrap  Dream     58.0     17.8         181      3700 female 2007\n3    Gentoo Biscoe     55.9     17.0         228      5600   male 2009\n4 Chinstrap  Dream     55.8     19.8         207      4000   male 2009\n5    Gentoo Biscoe     55.1     16.0         230      5850   male 2009\n6    Gentoo Biscoe     54.3     15.7         231      5650   male 2008\n\n\nOn peut bien s√ªr trier par plusieurs variables :\n\narranged &lt;- arrange(penguins, desc(year), desc(body_mass))\nhead(arranged)\n\n  species island bill_len bill_dep flipper_len body_mass  sex year\n1  Gentoo Biscoe     48.8     16.2         222      6000 male 2009\n2  Gentoo Biscoe     49.8     15.9         229      5950 male 2009\n3  Gentoo Biscoe     55.1     16.0         230      5850 male 2009\n4  Gentoo Biscoe     50.4     15.7         222      5750 male 2009\n5  Gentoo Biscoe     49.5     16.1         224      5650 male 2009\n6  Gentoo Biscoe     50.8     17.3         228      5600 male 2009\n\n\nLes donn√©es qualitatives sont tri√©es par ordre alphab√©tique de la premi√®re lettre de la cha√Æne de caract√®res :\n\narranged &lt;- arrange(penguins, desc(island))\nhead(arranged)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     40.3     18.0         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n6  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n\n\n\n\n\n4.1.4 Aggr√©gation de donn√©es\nL‚Äôagr√©gation consiste √† regrouper des observations selon une ou plusieurs variables (cat√©gories, dates, r√©gions, etc.) afin de calculer des indicateurs synth√©tiques (moyenne, total, √©cart-type, etc.) pour chaque groupe. C‚Äôest ce qui vous faites sur excel quand vous cr√©ez un tableau crois√© dynamique.\nEn traitement et analyse de donn√©es, il s‚Äôagit d‚Äôune des op√©rations les plus courantes.\n\n4.1.4.1 Aggr√©gation de l‚Äôensemble d‚Äôun jeu de donn√©es\n\n# On utilise le jeu de donn√©es palmerpenguins\ndata(package = 'palmerpenguins')\nhead(penguins)\n\n  species    island bill_len bill_dep flipper_len body_mass    sex year\n1  Adelie Torgersen     39.1     18.7         181      3750   male 2007\n2  Adelie Torgersen     39.5     17.4         186      3800 female 2007\n3  Adelie Torgersen     40.3     18.0         195      3250 female 2007\n4  Adelie Torgersen       NA       NA          NA        NA   &lt;NA&gt; 2007\n5  Adelie Torgersen     36.7     19.3         193      3450 female 2007\n6  Adelie Torgersen     39.3     20.6         190      3650   male 2007\n\npenguins &lt;- tidyr::drop_na(penguins)\n\nImaginons que l‚Äôon souhaite calculer la moyenne pour la variable bill_len et la variable flipper_len et conserver le r√©sultat dans un data.frame. La solution de base serait :\n\ndata.frame(\n    mean_bill_len = mean(penguins$bill_len),\n    mean_flipper_len = mean(penguins$flipper_len)\n)\n\n  mean_bill_len mean_flipper_len\n1      43.99279          200.967\n\n\nMaintenant, si on voulait calculer la moyenne pour tous les variables num√©riques, il faudrait r√©√©crire quatre fois la m√™me ligne. Ce n‚Äôest pas efficient. En R base, on utiliserait une boucle pour pallier ces redondances. dplyr a √©t√© con√ßu pour faciliter l‚Äô√©criture dans ces cas l√†. Pour r√©sumer un jeu de donn√©es on utilise la fonction summarise(). Pour obtenir le m√™me r√©sultat que pr√©c√©demment, on √©crira :\n\nsummarise(\n    penguins,\n    mean_bill_len = mean(bill_len),\n    mean_flipper_len = mean(flipper_len)\n)\n\n  mean_bill_len mean_flipper_len\n1      43.99279          200.967\n\n\nJusque l√†, √ßa ne nous avance pas √† grand chose, si ce n‚Äôest que l‚Äôon plus oblig√© d‚Äôutiliser les $ pour acc√©der aux variables. L√† o√π √ßa devient int√©ressant, c‚Äôest bien quand on a beaucoup de variables √† r√©sumer. Dans ce cas, on peut s√©lectionner les variables √† r√©sumer en utilisant la fonction across() qui permet prend une condition √† v√©rifier et une op√©ration √† effectuer sur les variables retenues. Par exemple, si comme pr√©c√©demment on souhaite calculer la moyenne pour tous les variables num√©riques, on √©crira :\n\nsummarise(penguins, across(where(is.numeric), ~mean(.x)))\n\n  bill_len bill_dep flipper_len body_mass     year\n1 43.99279 17.16486     200.967  4207.057 2008.042\n\n\nUne seul ligne de code permet de faire cela. Et si on souhaite √©galement calculer d‚Äôautres statistiques ? C‚Äôest aussi possible ! Par exemple, si on souhaite √©galement calculer la m√©diane et l‚Äô√©cart-type :\n\nsummarise(penguins, across(\n    # Uniquement sur les variables num√©riques sauf la variable year\n    where(is.numeric) & !year,\n    # Quelles fonctions appliquer\n    .fn = list(mean = mean, median = median, sd = sd),\n    # Quelles noms de variables renvoyer\n    .names = \"{.col}_{.fn}\" # .col est le nom de la var. et .fn le nom de la function\n))\n\n  bill_len_mean bill_len_median bill_len_sd bill_dep_mean bill_dep_median\n1      43.99279            44.5    5.468668      17.16486            17.3\n  bill_dep_sd flipper_len_mean flipper_len_median flipper_len_sd body_mass_mean\n1    1.969235          200.967                197       14.01577       4207.057\n  body_mass_median body_mass_sd\n1             4050     805.2158\n\n\nTr√®s bien, mais cela ne s‚Äôapplique que pour un jeu de donn√©es entier. Comment faire si l‚Äôon souhaite calculer ces statistiques pour des groupes ?\n\n\n4.1.4.2 Aggr√©gation par groupe\nPour aggr√©ger des donn√©es par groupe en utilisant dplyr il suffit d‚Äôemployer la fonction group_by() avec summarise(). Le reste du code ne change pas. Dans group_by(), on indique la ou les variables de regroupement. Par exemple, pour calculer la moyenne pour toutes les variables num√©riques sauf year par esp√®ces et par √Æles :\n\npenguins |&gt;\n    group_by(species, island) |&gt;\n    summarise(across(where(is.numeric) & !year, ~mean(.x)))\n\n`summarise()` has grouped output by 'species'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 5 √ó 6\n# Groups:   species [3]\n  species   island    bill_len bill_dep flipper_len body_mass\n  &lt;fct&gt;     &lt;fct&gt;        &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;\n1 Adelie    Biscoe        39.0     18.4        189.     3710.\n2 Adelie    Dream         38.5     18.2        190.     3701.\n3 Adelie    Torgersen     39.0     18.5        192.     3709.\n4 Chinstrap Dream         48.8     18.4        196.     3733.\n5 Gentoo    Biscoe        47.6     15.0        217.     5092.\n\n\n\n\n\n\n\n\nbase R\n\n\n\n\n\nEn R base, pour effectuer une aggr√©gation par groupe on utilisera la fonction aggregate(). Par exemple, pour calculer la moyenne de toutes les variables num√©riques dans iris\n\naggregate(\n    penguins[, sapply(penguins, is.numeric)], # seule les variables numeriques\n    by = list(Species = penguins$species), # la variable qui contient les groupes\n    FUN = mean # La fonction\n)\n\n    Species bill_len bill_dep flipper_len body_mass     year\n1    Adelie 38.82397 18.34726    190.1027  3706.164 2008.055\n2 Chinstrap 48.83382 18.42059    195.8235  3733.088 2007.971\n3    Gentoo 47.56807 14.99664    217.2353  5092.437 2008.067\n\n\n\n\n\n\n\n\n4.1.5 Jointure de donn√©es\nPour faire des jointures, on s‚Äôappuira sur le package dplyr et ses fonctions *_join() (c.f. doc). Ces derni√®res permettent une approche intuitive des jointures, mimant le comportement des jointures en SQL.\n\n\n\nJoin in dplyr\n\n\nImaginons que nous disposons de deux jeux de donn√©es. Le premier contient le code postal et le nom de commune fran√ßaise. Le deuxi√®me rec√®le la population et le code postal. On souhaite joindre les deux donn√©es pour disposer au sein d‚Äôun m√™me tableau le code postal, le nom des communes et leur population.\n\ndt1 &lt;- data.frame(\n    code = c(29120, 29200, 29600, 29160),\n    commune = c(\"Pont-L'abb√©\", \"Brest\", \"Morlaix\", \"Crozon\")\n)\nprint(dt1)\n\n   code     commune\n1 29120 Pont-L'abb√©\n2 29200       Brest\n3 29600     Morlaix\n4 29160      Crozon\n\ndt2 &lt;- data.frame(\n    code = c(29120, 29200, 29600, 29880),\n    pop = c(140993, 8403, 15220, 6719)\n)\nprint(dt2)\n\n   code    pop\n1 29120 140993\n2 29200   8403\n3 29600  15220\n4 29880   6719\n\n\nPour effectuer une jointure, il faut disposer d‚Äôune variable commune entre les deux tableaux. Dans notre cas, il s‚Äôagit de la variable code. On peut alors effectuer quatre jointure diff√©rentes :\n\nlibrary(dplyr)\n\nleft_join(dt1, dt2, by = \"code\") # garde toutes les lignes de dt1\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n4 29160      Crozon     NA\n\nright_join(dt1, dt2, by = \"code\") # garde toutes les lignes de dt2\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n4 29880        &lt;NA&gt;   6719\n\ninner_join(dt1, dt2, by = \"code\") # garde uniquement les codes communs\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n\nfull_join(dt1, dt2, by = \"code\") # garde toutes les lignes des deux\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n4 29160      Crozon     NA\n5 29880        &lt;NA&gt;   6719\n\n\nAu quotidien, on emploie le plus souvent le left_join().\nSouvent, on dispose de la m√™me variable dans deux jeux de donn√©es mais nomm√©e diff√©remment. Dans ce cas soit :\n\nOn renomme la variable dans un des tableaux puis on joint normalement ;\nOn change l‚Äôargument by par by = c(\"var_dt1\" = \"var_dt2\").\n\n\n\n\n\n\n\nbase R\n\n\n\n\n\nEn base R, on utilise merge() avec diff√©rents param√®tres pour obtenir le m√™me r√©sultat :\n\nmerge(dt1, dt2, by = \"code\", all.x = TRUE) # left join\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29160      Crozon     NA\n3 29200       Brest   8403\n4 29600     Morlaix  15220\n\nmerge(dt1, dt2, by = \"code\", all.y = TRUE) # right join\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n4 29880        &lt;NA&gt;   6719\n\nmerge(dt1, dt2, by = \"code\") # inner join (par d√©faut)\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29200       Brest   8403\n3 29600     Morlaix  15220\n\nmerge(dt1, dt2, by = \"code\", all = TRUE) # full join\n\n   code     commune    pop\n1 29120 Pont-L'abb√© 140993\n2 29160      Crozon     NA\n3 29200       Brest   8403\n4 29600     Morlaix  15220\n5 29880        &lt;NA&gt;   6719",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Traitement de donn√©es sous R</span>"
    ]
  },
  {
    "objectID": "ressources/data_process/data_basic.html#manipulation-de-matrice",
    "href": "ressources/data_process/data_basic.html#manipulation-de-matrice",
    "title": "4¬† Traitement de donn√©es sous R",
    "section": "4.2 Manipulation de matrice",
    "text": "4.2 Manipulation de matrice\nBien que les data.frame (et objets associ√©s) soit les objets les plus courants que vous aurez √† traiter, il arrive que l‚Äôon se retrouve √† traiter des matrices (matrix). Ces objets, plus simples dans leur structure que les Dataframe, sont souvent utilis√©s pour optimiser des traitements.\n\n4.2.1 Les bases des matrices sous R\n\n4.2.1.1 Cr√©ation de matrices\nOn peut cr√©er une matrice avec la fonction matrix() :\n\n# Cr√©ation d'une matrice 3x3 remplie par colonnes\nm1 &lt;- matrix(1:9, nrow = 3, ncol = 3)\nm1\n\n     [,1] [,2] [,3]\n[1,]    1    4    7\n[2,]    2    5    8\n[3,]    3    6    9\n\n# On peut aussi remplir par lignes\nm2 &lt;- matrix(1:9, nrow = 3, byrow = TRUE)\nm2\n\n     [,1] [,2] [,3]\n[1,]    1    2    3\n[2,]    4    5    6\n[3,]    7    8    9\n\n\n\n\n4.2.1.2 Acc√®s aux √©l√©ments\nOn peut acc√©der aux √©l√©ments de la matrice de la m√™me fa√ßon que dans un dataframe en utilisant l‚Äôindice des lignes et des colonnes.\n\nm1[2, 3] # √âl√©ment de la 2e ligne, 3e colonne\n\n[1] 8\n\nm1[1, ] # 1√®re ligne compl√®te\n\n[1] 1 4 7\n\nm1[, 2] # 2e colonne compl√®te\n\n[1] 4 5 6\n\n\nSi les lignes et/ou les colonnes sont nomm√©es, on peut √©galement utiliser les noms pour retrouver les valeurs.\n\ncolnames(m1) &lt;- paste0(\"c\", 1:3)\nrownames(m1) &lt;- paste0(\"r\", 1:3)\nm1[\"r1\", \"c3\"]\n\n[1] 7\n\n\n\n\n4.2.1.3 Op√©rations sur les matrices\nLes op√©rations arithm√©tiques sont vectoris√©es.\n\nm1 + 10 # Ajout d'une constante\n\n   c1 c2 c3\nr1 11 14 17\nr2 12 15 18\nr3 13 16 19\n\nm1 * 2  # Multiplication √©l√©ment par √©l√©ment\n\n   c1 c2 c3\nr1  2  8 14\nr2  4 10 16\nr3  6 12 18\n\nm1 ^ 2  # Carr√© de chaque √©l√©ment\n\n   c1 c2 c3\nr1  1 16 49\nr2  4 25 64\nr3  9 36 81\n\n\nPour les multiplications matricielles\n\nm1 * m2 # produit de hadamard (√©l√©ment par √©l√©ment)\n\n   c1 c2 c3\nr1  1  8 21\nr2  8 25 48\nr3 21 48 81\n\nm1 %*% m2 # produit scalaire (dot product)\n\n   [,1] [,2] [,3]\nr1   66   78   90\nr2   78   93  108\nr3   90  108  126\n\nm1[1, ] %o% m1[2, ] # produit ext√©rieur (outer product)\n\n   c1 c2 c3\nc1  2  5  8\nc2  8 20 32\nc3 14 35 56\n\n\nIl est √©galement possible de calculer des statistiques pour les lignes et les colonnes :\n\nrowSums(m1)\n\nr1 r2 r3 \n12 15 18 \n\nrowMeans(m1)\n\nr1 r2 r3 \n 4  5  6 \n\ncolSums(m1)\n\nc1 c2 c3 \n 6 15 24 \n\ncolMeans(m1)\n\nc1 c2 c3 \n 2  5  8 \n\n\n\n\n4.2.1.4 Autres op√©rations\n\nt(m1) # Transpos√©e\n\n   r1 r2 r3\nc1  1  2  3\nc2  4  5  6\nc3  7  8  9\n\ndet(m1) # D√©terminant\n\n[1] 0\n\ndiag(m1) # Diagonale\n\n[1] 1 5 9",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Traitement de donn√©es sous R</span>"
    ]
  },
  {
    "objectID": "ressources/data_process/data_basic.html#traitement-de-cha√Æne-de-caract√®res",
    "href": "ressources/data_process/data_basic.html#traitement-de-cha√Æne-de-caract√®res",
    "title": "4¬† Traitement de donn√©es sous R",
    "section": "4.3 Traitement de cha√Æne de caract√®res",
    "text": "4.3 Traitement de cha√Æne de caract√®res\nR√©f√©rences :\n\nLe chapitre les cha√Ænes de caract√®res de guide-R (Larmarange, 2025)\n\n\n4.3.1 Chercher/remplacer\nPour chercher remplacer dans une cha√Æne de caract√®re (variable ou vecteur), on utiliser la fonction de base gsub() ou la fonction stringr::str_replace().\n\n# Avec une cha√Æne de caract√®re\nx &lt;- \"Une phras mal orthographi√©\"\nx &lt;- gsub(x = x, \"phras\", \"phrase\")\ngsub(x = x, \"orthographi√©\", \"orthographi√©e\")\n\n[1] \"Une phrase mal orthographi√©e\"\n\n# Avec un vecteur\nx &lt;- c(\"Puie\", \"pluie\", \"ORag_\", \"Orage\")\nx &lt;- gsub(x = x, \"Puie\", \"pluie\")\ngsub(x = x, \"ORag_\", \"orage\")\n\n[1] \"pluie\" \"pluie\" \"orage\" \"Orage\"\n\n\nTout l‚Äôint√©r√™t de passer par un langage de programmation est de pouvoir automatiser au maximum le remplacement des cha√Ænes de caract√®re. Pour cela, on utilise les expressions r√©guli√®res (on dira plut√¥t regex). Ces derni√®res permettent d‚Äôidentifier efficacement des sch√©mas dans des cha√Ænes de caract√®res. Imaginons que l‚Äôon souhaite supprimer tous les espaces qui sont plac√©s au d√©but d‚Äôune cha√Æne de caract√®re dans un vecteur :\n\nx &lt;- c(\"Michel Legrand\", \"Glenn Gould\", \" Michel Legrand\", \" Glenn Gould\")\n# Quatre valeur unique alors qu'on souhaite en avoir 2.\nunique(x)\n\n[1] \"Michel Legrand\"  \"Glenn Gould\"     \" Michel Legrand\" \" Glenn Gould\"   \n\n# Supprimer les espaces situ√©s au d√©but de la cha√Æne de caract√®re\nx &lt;- gsub(x = x, \"^ \", \"\")\nunique(x)\n\n[1] \"Michel Legrand\" \"Glenn Gould\"   \n\n\nOn peut √©galement mouvoir des bouts de cha√Ænes en utilisant des groupes. Supposons que l‚Äôon veuille passer les noms avant les pr√©noms :\n\nx &lt;- c(\"Michel Legrand\", \"Glenn Gould\", \"Michel Legrand\", \"Glenn Gould\")\ngsub(x = x, \"^(.*(?= )) (.*$)\", \"\\\\2 \\\\1\", perl = TRUE)\n\n[1] \"Legrand Michel\" \"Gould Glenn\"    \"Legrand Michel\" \"Gould Glenn\"   \n\n\nLes expressions r√©guli√®res ne sont pas forc√©ment facile √† manipuler mais quand on commence √† les prendre en main on gagne un temps fou. Vous pouvez vous renseigner ici.\n\n\n\nQuand vous commencez √† maitriser un peu les regex\n\n\n\n\n4.3.2 Concat√©nation\nPour concat√©ner deux cha√Ænes de caract√®res :\n\nlibrary(glue)\n\nstr1 &lt;- \"un ch√™ne\"\nstr2 &lt;- \"vouvre\"\n\n# M√©thode 1: paste() et paste0()\nconc1 &lt;- paste(str1, str2) # espace par d√©faut entre les deux cha√Ænes\nconc2 &lt;- paste0(str1, \" \", str2)\n\n# M√©thode 2: sprintf()\nconc3 &lt;- sprintf(\"%s %s\", str1, str2)\n\n# M√©thode 3: glue()\nconc4 &lt;- glue(\"{str1} {str2}\")\n\nprint(conc4)\n\nun ch√™ne vouvre\n\nall(c(conc1, conc2, conc3) == conc4)\n\n[1] TRUE\n\n\nglue() est la m√©thode la plus moderne, elle est √† privil√©gier.\n\n\n4.3.3 Tableau de contingence\nPour calculer un tableau de contingence sous R, on utilise la fonction table() avec les deux vecteurs que l‚Äôon souhaite analyser.\n\ntable(penguins$species, penguins$island)\n\n           \n            Biscoe Dream Torgersen\n  Adelie        44    55        47\n  Chinstrap      0    68         0\n  Gentoo       119     0         0",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Traitement de donn√©es sous R</span>"
    ]
  },
  {
    "objectID": "ressources/stats/stats.html",
    "href": "ressources/stats/stats.html",
    "title": "5¬† Statistiques",
    "section": "",
    "text": "5.1 Statistiques univari√©es",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Statistiques</span>"
    ]
  },
  {
    "objectID": "ressources/stats/stats.html#statistiques-univari√©es",
    "href": "ressources/stats/stats.html#statistiques-univari√©es",
    "title": "5¬† Statistiques",
    "section": "",
    "text": "5.1.1 Variable quantitative\nLe tableau ci-dessous r√©capitule les indicateurs statistiques les plus courrament employ√©s en analyse de donn√©es.\n\n\n\n\n\n\n\n\nStatistique\nFormule math√©matique\nFonction R\n\n\n\n\nMoyenne\n\\(\\bar{x} = \\frac{1}{n}\\sum_{i=1}^{n} x_i\\)\nmean(x)\n\n\nM√©diane\nValeur centrale de l‚Äô√©chantillon tri√©\nmedian(x)\n\n\nVariance\n\\(\\sigma^2 = \\frac{1}{n-1}\\sum_{i=1}^{n}(x_i - \\bar{x})^2\\)\nvar(x)\n\n\n√âcart-type\n\\(\\sigma = \\sqrt{\\sigma^2}\\)\nsd(x)\n\n\nMinimum\n\\(\\min(x_1, \\dots, x_n)\\)\nmin(x)\n\n\nMaximum\n\\(\\max(x_1, \\dots, x_n)\\)\nmax(x)\n\n\nAmplitude (√©tendue)\n\\(\\max(x) - \\min(x)\\)\nrange(x) ou diff(range(x))\n\n\nSomme\n\\(\\sum_{i=1}^{n} x_i\\)\nsum(x)\n\n\nNombre d‚Äôobservations\n\\(n\\)\nlength(x)\n\n\nQuantiles\n\\(Q_p\\) tel que \\(P(X \\le Q_p) = p\\)\nquantile(x, probs = p)\n\n\nCoefficient de variation\n\\(CV = \\frac{\\sigma}{\\bar{x}}\\)\nsd(x) / mean(x)\n\n\n\nOn peut r√©cup√©rer un r√©sum√© statistiques basique d‚Äôun vecteur num√©rique avec la fonction summary().\n\nx &lt;- rnorm(n = 1e3, mean = 10, sd = 2)\nsummary(x)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  3.720   8.573   9.934   9.913  11.260  16.073 \n\n\n\n\n5.1.2 Variable qualitative\nDans le cas des variables qualitatives, on ne peut pas r√©aliser de statistiques. On d√©crira la variable par les op√©ration list√©es dans le tableau ci-dessous :\n\n\n\n\n\n\n\nOp√©ration\nFonction R\n\n\n\n\nLister les modalit√©s\nunique(x)\n\n\nNombre de modalit√©s\nlength(unique(x))\n\n\nNombre de valeurs par modalit√©\ntable(x) ((table(x) / length(x)) * 100)\n\n\nNombre d‚Äôobservations\nlength(x)",
    "crumbs": [
      "Traitements et analyse de donn√©es",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Statistiques</span>"
    ]
  },
  {
    "objectID": "ressources/viz/graph.html",
    "href": "ressources/viz/graph.html",
    "title": "6¬† Visualisation de donn√©es",
    "section": "",
    "text": "6.1 Les graphs de base sous R\nUn des points forts de R r√©side dans sa capacit√© √† produire simplement des graphiques l√©ch√©s. Pour cela, on emploie l‚Äôh√©g√©monique package ggplot2. Il est bas√© sur The Grammar of Graphics (2005), ouvrage de r√©f√©rence sur la data-visualisation.\nR vient avec des fonctions de base pour repr√©senter des donn√©es. Ces fonctions sont pratiques dans la mesure o√π on peut cr√©er un graphique en tr√®s peu de ligne de code.\nCode\n# On supprime les valeurs manquantes pour √©viter les erreurs\npenguins &lt;- drop_na(penguins)\n\n# D√©finir la grille 2x2 pour afficher plusieurs graphiques\npar(mfrow = c(2, 2))\n\n# Graphe en ligne : masse moyenne par ann√©e\nmean_mass &lt;- summarise(penguins, mean_mass = mean(body_mass_g), .by = year)\nplot(mean_mass$year, mean_mass$mean_mass, type = \"l\", col = \"blue\",\n     xlab = \"Ann√©e\", ylab = \"Masse moyenne (g)\",\n     main = \"Masse moyenne des manchots par ann√©e\")\n\n# Graphe en barres : nombre d'individus par esp√®ce\nbarplot(table(penguins$species), col = c(\"skyblue\", \"orange\", \"lightgreen\"),\n        main = \"Nombre d'individus par esp√®ce\",\n        ylab = \"Effectif\")\n\n# Histogramme : distribution de la longueur du bec\nhist(penguins$bill_length_mm, col = \"lightblue\", border = \"white\",\n     main = \"Distribution de la longueur du bec\",\n     xlab = \"Longueur du bec (mm)\")\n\n# Boxplot : masse corporelle selon l'esp√®ce\nboxplot(body_mass_g ~ species, data = penguins,\n        col = c(\"skyblue\", \"orange\", \"lightgreen\"),\n        main = \"Masse corporelle par esp√®ce\",\n        ylab = \"Masse (g)\")\nLes graphiques produits sont difficillement personnalisables et souvent peu au go√ªt des utilisateurs. D√®s que l‚Äôon souhaite produire des graphiques l√©ch√©s, on se tourne vers ggplot2.",
    "crumbs": [
      "Visualisation",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Visualisation de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/viz/graph.html#sec-ggplot",
    "href": "ressources/viz/graph.html#sec-ggplot",
    "title": "6¬† Visualisation de donn√©es",
    "section": "6.2 Graphiques avec ggplot2",
    "text": "6.2 Graphiques avec ggplot2\nBeaucoup d‚Äôencre a coul√© sur le sujet. Je ne vais pas r√©inventer l‚Äôeau chaude. Vous trouverez tous ce qu‚Äôil vous faut dans le chapitre Graphiques avec ggplot2 de Joseph larmarange.\n\n6.2.1 Les geoms de bases\n\n\n\n\n\n\n\nFonction ggplot2\nDescription\n\n\n\n\ngeom_point()\nNuage de points (relation entre deux variables)\n\n\ngeom_line()\nCourbe / ligne (√©volution, s√©rie temporelle)\n\n\ngeom_bar()\nGraphique en b√¢tons (comptage automatique)\n\n\ngeom_histogram()\nHistogramme (distribution d‚Äôune variable)\n\n\ngeom_density()\nCourbe de densit√© (distribution liss√©e)\n\n\ngeom_boxplot()\nBo√Æte √† moustaches (r√©sum√© statistique)\n\n\ngeom_tile()\nCarte de chaleur (heatmap)\n\n\ngeom_text()\nAjout de texte sur le graphique\n\n\ngeom_hline()\nLigne horizontale\n\n\ngeom_vline()\nLigne verticale\n\n\n\n\n6.2.1.1 Les lignes\nPour r√©aliser des nuages de points, on utilise geom_point().\n\nto_plot_tot &lt;- penguins |&gt;\n    dplyr::count(year)\nto_plot_species &lt;- penguins |&gt;\n    dplyr::count(year, species)\n\npal &lt;- MetBrewer::met.brewer(\"Isfahan2\") # color-blind friendly\n\n# Graphique en lignes\np1 &lt;- ggplot(to_plot_tot, aes(x = year, y = n)) +\n  geom_line() + theme_minimal()\np2 &lt;- ggplot(to_plot_species, aes(x = year, y = n, color = species)) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = pal) +\n    theme_minimal() +\n    theme(legend.position = \"bottom\")\nwrap_plots(list(p1, p2))\n\n\n\n\n\n\n\n\n\n\n6.2.1.2 Les nuages de points\nPour r√©aliser des nuages de points, on utilise geom_point().\n\n# Nuage de points\np1 &lt;- ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point()\np2 &lt;- ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species)) +\n  geom_point() +\n    scale_color_manual(values = pal)\np3 &lt;- ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, fill = species)) +\n  geom_point(shape = 21, color = \"white\", alpha = 0.5, size = 4)  +\n    scale_fill_manual(values = pal)\np4 &lt;- ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, size = body_mass_g)) +\n  geom_point(color = pal[3], alpha = 0.3) +\n  scale_size(range = c(0, 8))\n\n# All graph in a single one\nplts &lt;- list(p1, p2, p3, p4)\nplts &lt;- map(plts, ~.x + theme_minimal() + theme(legend.position = \"bottom\"))\nwrap_plots(plts)\n\n\n\n\n\n\n\n\n\n\n6.2.1.3 Les graphs en baton\n\nto_plot &lt;- drop_na(penguins)\n\np1 &lt;- ggplot(to_plot, aes(x = species)) +\n  geom_bar()\np2 &lt;- ggplot(to_plot, aes(x = species, fill = island)) +\n  geom_bar() +\n  labs(title = \"position = \\\"stack\\\"\") +\n  scale_fill_manual(values = pal)\np3 &lt;- ggplot(to_plot, aes(x = species, fill = island)) +\n  geom_bar(position = \"dodge\") +\n  labs(title = \"position = \\\"dodge\\\"\") +\n  scale_fill_manual(values = pal)\np4 &lt;- ggplot(to_plot, aes(x = species, fill = island)) +\n  geom_bar(position = \"fill\") +\n  labs(title = \"position = \\\"fill\\\"\") +\n  scale_fill_manual(values = pal)\n\n# All graph in a single one\nplts &lt;- list(p1, p2, p3, p4)\nplts &lt;- map(plts, ~.x + theme_minimal() + theme(legend.position = \"bottom\"))\nwrap_plots(plts)\n\n\n\n\n\n\n\n\n\n\n6.2.1.4 Les graphiques statistiques\nPour rappel, les graphiques statistiques servent √† comprendre la distribution des variables.\nBo√Æte √† moustache (et associ√©s) :\n\np1 &lt;- ggplot(penguins, aes(y = body_mass_g)) +\n  geom_boxplot()\np2 &lt;- ggplot(penguins, aes(x = species, y = bill_length_mm)) +\n  geom_boxplot()\np3 &lt;- ggplot(penguins, aes(x = species, y = bill_length_mm, fill = species)) +\n  geom_boxplot() +\n  scale_fill_manual(values = pal)\np4 &lt;- ggplot(penguins, aes(x = species, y = bill_length_mm, fill = species)) +\n  geom_violin() +\n  geom_boxplot(width = 0.1, fill = \"white\") +\n  scale_fill_manual(values = pal)\n\nplts &lt;- list(p1, p2, p3, p4)\nplts &lt;- map(plts, ~.x + theme_minimal() + theme(legend.position = \"bottom\"))\nwrap_plots(plts)\n\n\n\n\n\n\n\n\nHistogrames :\n\np1 &lt;- ggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram()\np2 &lt;- ggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram(bins = 80)\np3 &lt;- ggplot(penguins, aes(x = body_mass_g, fill = species)) +\n  geom_histogram(color = \"white\") +\n  scale_fill_manual(values = pal)\np4 &lt;- ggplot(penguins, aes(x = body_mass_g)) +\n  geom_histogram(aes(y = ..density..), fill = \"white\", color = \"black\") +\n  geom_density(fill = pal[3], alpha = 0.2)\n\nplts &lt;- list(p1, p2, p3, p4)\nplts &lt;- map(plts, ~.x + theme_minimal() + theme(legend.position = \"bottom\"))\nwrap_plots(plts)\n\n\n\n\n\n\n\n\nCourbe de fr√©quence cumul√©e (Empirical Cumulative Distribution Function) :\n\np1 &lt;- ggplot(penguins, aes(x = body_mass_g)) +\n  stat_ecdf(geom = \"step\")\np2 &lt;- ggplot(penguins, aes(x = body_mass_g, color = species)) +\n  stat_ecdf(geom = \"step\") +\n  scale_color_manual(values = pal)\n\nplts &lt;- list(p1, p2)\nplts &lt;- map(plts, ~.x + theme_minimal() + theme(legend.position = \"bottom\"))\nwrap_plots(plts)\n\n\n\n\n\n\n\n\n\n\n\n6.2.2 Faire des graphs par groupe\nAvec ggplot2, il est possible de g√©n√©rer des graphs par groupes. Par exemple, on peut vouloir comparer la longueur et la profondeur du bec des pingouins par esp√®ce dans des graphs s√©par√©s. Plut√¥t que d‚Äô√©crire manuellement trois graphs ou d‚Äô√©crire une boucle, on peut utiliser la fonction facet_wraps().\n\nggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +\n    geom_point() +\n    facet_wrap(vars(species))\n\n\n\n\n\n\n\n\nOn peut aussi garder l‚Äôensemble du nuage sur chaque plot pour faciliter la comparaison :\n\nggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +\n    geom_point(data = transform(penguins, species = NULL), colour = \"grey85\") +\n    geom_point() +\n    facet_wrap(vars(species))\n\n\n\n\n\n\n\n\n\n\n6.2.3 Apparence\nPour modifier l‚Äôapparence du graphique, on utilise la fonction theme(). Vous pouvez tout modifier, le texte, la grille, les axes, etc. (cf. Figure¬†6.1).\n\n\n\n\n\n\nFigure¬†6.1: Fiche de r√©f√©rence du th√®me ggplot2 par Isabella Benabaye (source)\n\n\n\n\n6.2.3.1 Les th√®mes par d√©faut\nIl existe de nombreux th√®mes par d√©faut que vous pouvez essayez. Par exemple :\n\np &lt;- ggplot(mtcars, aes(x = wt, y = mpg)) +\n  geom_point() +\n  labs(\n    title = \"Fuel Efficiency vs Weight\",\n    x = \"Weight (1000 lbs)\",\n    y = \"Miles per Gallon\",\n    caption = \"source : mtcars (dplyr), 2025. R√©al. : Antoine Le Doeuff, 2025\"\n  )\n\np1 &lt;- p + labs(caption = \"\") + theme_minimal()\np2 &lt;- p + theme_classic()\npatchwork::wrap_plots(list(p1, p2))\n\n\n\n\n\n\n\n\nDes packages proposent des packages suppl√©mentaires pr√™t √† l‚Äôemploie. Je vous conseil ces deux packages1 : bbplot, hrbrthemes.\n1¬†Vous trouverez une liste plus exhaustive ici.\n\n\nExemple de graphs r√©alis√©s avec bbplot. (bbplot, 2025)\n\n\n\n\n6.2.3.2 Les couleurs\nPour modifier les couleurs des couches, on utilise les fonctions scale_color_*() ou scale_fill_*() en fonction de l‚Äôesth√©tique que vous aurez sp√©cifi√© dans votre votre couche.\n\n\n\n\n\n\nPensez aux daltonien‚ãÖnes\n\n\n\nUtilisez des palettes discernables par les daltonien‚ãÖnes (color-blind friendly).\nVous pouvez avoir un aper√ßu de comment votre plot sera per√ßu pour un‚ãÖe daltonien‚ãÖne avec la fonction colorblindr::cvd_grid().\n\np_bl &lt;- ggplot(mtcars, aes(x = wt, y = mpg, color = as.factor(carb))) +\n  geom_point() +\n  theme_minimal()\n\ncolorblindr::cvd_grid(p_bl)\n\n\n\n\n\n\n\n\n\n\nPersonnellement, j‚Äôaime bien les packages suivants :\n\nMetBrewer: Inspir√© des ≈ìuvres du MET\nMexBrewer: Inspir√© par les peintres et muralistes mexicains.\nMoMA: Inspir√© des ≈ìuvres expos√©es au MoMA.\nPNWColors: Inspir√© des couleurs du Pacific Nord-Ouest.\nwesanderson: Inspir√© des couleurs pr√©sentes dans les films de Wes Anderson.\nNatParksPalettes: Inspir√© de photos de parcs naturels.\nscico: Tr√®s bien pour les palettes de couleurs continues.\n\n\n\n6.2.3.3 Textes\nPour modifier la police de caract√®re, on peut par exemple employer la fonction font_add_google() du package sysfont. Cela vous permet d‚Äôimporter une famille typographique depuis google font.\n\n# Charger la font\nsysfonts::font_add_google(name = \"Roboto\", family = \"roboto\")\n\np +\n  theme(\n    plot.title = element_text(family = \"roboto\", size = 16, face = \"bold\"),\n    axis.title.x = element_text(family = \"roboto\", size = 12),\n    axis.title.y = element_text(family = \"roboto\", size = 12),\n    plot.caption = element_text(family = \"roboto\", size = 8)\n  )\n\n\n\n\n\n\n\n\nPour plus de controle sur le rendu texte, vous pouvez utiliser le package ggtext. Celui-ci vous permet notamment d‚Äô√©crire vos labels en markdown.\n\nlibrary(ggtext)\n\np +\n  labs(\n    title = \"Efficacit√© √©nerg√©tique vs Poids\",\n    x = \"*Poids* (1000 lbs)\",\n    y = \"*Miles per Gallon*\",\n    caption = \"**Source :** mtcars (dplyr), 2025&lt;br&gt;**R√©alisation :** Antoine Le Doeuff, 2025\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_markdown(family = \"roboto\", size = 16, face = \"bold\"),\n    axis.title.x = element_markdown(family = \"roboto\", size = 12),\n    axis.title.y = element_markdown(family = \"roboto\", size = 12),\n    plot.caption = element_markdown(family = \"roboto\", size = 8, lineheight = 1.5)\n  )\n\n\n\n\n\n\n\n\n\n\n6.2.3.4 Cr√©er son propre th√®me\nQuant on r√©dige un document, on s‚Äôappuie sur une identit√© visuelle bas√©e en partie sur une charte graphique. En un mot : il faut se tenir √† des r√®gles graphiques valables pour l‚Äôensemble de figures. ggplot2 permet de mettre en ≈ìuvre cette r√®gle simplement par la cr√©ation d‚Äôun th√®me que l‚Äôon pourra appliquer √† tout objet ggplot2 (cartes comprises).\nPrenons un exemple, construisons un th√®me bas√© sur le th√®me ggplot2 par d√©faut theme_minimal() :\n\nsysfonts::font_add_google(name = \"Roboto\", family = \"roboto\")\n\nmy_theme &lt;- function(base_size = 11, base_family = \"roboto\", theme_color = \"#00976f\") {\n  ggplot2::theme_minimal(base_size = base_size, base_family = base_family) +\n    ggplot2::theme(\n      # Titres\n      plot.title = ggtext::element_markdown(\n        family = \"roboto\", size = base_size + 5, face = \"bold\", color = theme_color\n      ),\n      axis.title.x = ggtext::element_markdown(family = \"roboto\", size = base_size, face = \"italic\"),\n      axis.title.y = ggtext::element_markdown(family = \"roboto\", size = base_size, face = \"italic\"),\n      plot.caption = ggtext::element_markdown(family = \"roboto\", size = base_size - 3, lineheight = 1.5),\n\n      # L√©gende\n      legend.position = \"right\",\n      legend.title = ggplot2::element_text(face = \"bold\"),\n      legend.background = ggplot2::element_blank(),\n      legend.key = ggplot2::element_blank(),\n\n      # Marges\n      plot.margin = ggplot2::margin(5, 5, 5, 5)\n    )\n}\n\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n  geom_point() +\n  labs(\n    title = \"Efficacit√© √©nerg√©tique vs Poids\",\n    x = \"Weight (1000 lbs)\",\n    y = \"Miles per Gallon\",\n    caption = \"**Donn√©es :** mtcars (dplyr), 2025.&lt;br&gt;**R√©alisation :** Antoine Le Doeuff, 2025\"\n  ) +\n  my_theme()\n\n\n\n\n\n\n\n\nOn peut faire d‚Äôun th√®me le th√®me par d√©faut pour la session R courante.\n\ntheme_set(my_theme())\n\nggplot(mtcars, aes(x = as.factor(cyl), y = mpg)) +\n  geom_boxplot() +\n  labs(\n    title = \"Efficacit√© √©nerg√©tique vs Nombre de cylindres\",\n    x = \"Nombre de cylindres\",\n    y = \"Miles per Gallon\",\n    caption = \"**Donn√©es :** mtcars (dplyr), 2025.&lt;br&gt;**R√©alisation :** Antoine Le Doeuff, 2025\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n6.2.4 Combiner des graphs\nIl existe de nombreux packages pour combiner des graphs ggplot sous R, voici les plus utilis√©s :\n\npacthwork : Le plus utilis√© aujourd‚Äôhui, il est tr√®s intuitif.\ncowplot : Tr√®s utilis√© historiquemeny\ngridExtra : Ancien mais encore courant\n\nJe vous conseil d‚Äôutiliser patchwork. Pour combiner deux graphs horizontalement, on utilise le + :\n\nlibrary(patchwork)\n\np1 &lt;- ggplot(penguins) + geom_point(aes(bill_depth_mm, bill_length_mm))\np2 &lt;- ggplot(penguins) + geom_boxplot(aes(species, body_mass_g))\n\np1 + p2\n\n\n\n\n\n\n\n# Ce qui revient au m√™me que wrap_plots(list(p1, p2), nrow = 1, ncol = 2)\n\nPour combiner deux graphs verticalement, le / :\n\np3 &lt;- ggplot(penguins) + stat_ecdf(aes(body_mass_g), geom = \"step\")\np4 &lt;- ggplot(penguins) + geom_bar(aes(species))\n\np3 / p4\n\n\n\n\n\n\n\n# Ce qui revient au m√™me que wrap_plots(list(p1, p2), nrow = 2, ncol = 1)\n\nOn peut combiner les op√©rateurs pour obtenir un rendu complexe :\n\np_all &lt;- (p1 | p2 | p3) / p4\n\nVous pouvez bien s√ªr ajouter des annotations aux graphs.\n\np_all +\n  plot_annotation(\n    title = \"Graphiques combin√©s\",\n    caption = \"Donn√©es : palmerpenguins, 2025. R√©alisation : Antoine Le Doeuff, 2025\",\n    # Ajouter des tags\n    tag_levels = 'A',\n  )",
    "crumbs": [
      "Visualisation",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Visualisation de donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/viz/map.html",
    "href": "ressources/viz/map.html",
    "title": "7¬† Cartographie",
    "section": "",
    "text": "7.1 Cartographie avec ggplot2\nIl existe de nombreux packages pour faire de la cartographie sous R. Chacun a sa propre fa√ßon de fonctionner.\nLes packages g√©n√©raux les plus utilis√©s sont :\nPour cr√©√©er des cartes sp√©cifiques :\nOn va se concentrer sur ggplot2 + sf car la syntaxe est la m√™me que pour les graphiques avec ggplot2.\ngeom_sf() est une fonction du package ggplot2 qui permet de repr√©senter des objets spatiaux au format sf (simple features). Elle offre une int√©gration fluide entre les donn√©es g√©ographiques et le syst√®me de visualisation de ggplot2, sans avoir besoin d‚Äôutiliser des outils externes.\nn peut facilement afficher une carte simple √† partir d‚Äôun jeu de donn√©es g√©ographiques int√©gr√© comme rnaturalearth :\n# Charger les donn√©es du monde\nworld &lt;- ne_countries(scale = \"medium\", returnclass = \"sf\")\n\n# Carte du monde\nggplot(data = world) +\n  geom_sf(fill = \"lightblue\", color = \"white\") +\n  labs(title = \"Carte du monde avec geom_sf()\") +\n  theme_minimal()\nIci, chaque polygone repr√©sente un pays. L‚Äôesth√©tique (fill, color) fonctionne comme pour les autres g√©om√©tries de ggplot2.",
    "crumbs": [
      "Visualisation",
      "<span class='chapter-number'>7</span>¬† <span class='chapter-title'>Cartographie</span>"
    ]
  },
  {
    "objectID": "ressources/viz/map.html#sec-carto-ggplot",
    "href": "ressources/viz/map.html#sec-carto-ggplot",
    "title": "7¬† Cartographie",
    "section": "",
    "text": "7.1.1 Carto th√©matique\nOn charge les librairies et on t√©l√©charge les donn√©es.\n\n\nCode\nlibrary(happign)\nlibrary(dplyr)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(ggspatial)\n\ncom_fin &lt;- get_wfs(\n    x = NULL,\n    layer = \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune\",\n    ecql_filter = \"code_insee LIKE '29%'\"\n)\nbrest &lt;- st_buffer(filter(com_fin, nom_officiel == \"Brest\"), 30e3)\nocsol &lt;- get_wfs(brest, layer = \"BDCARTO_V5:occupation_du_sol\", spatial_filter = \"bbox\")\n\n\n\n7.1.1.1 Choropl√®te cat√©gorielle\n\n# D√©finition des couleurs\npal &lt;- c(\n  \"Prairie\"            = \"#bece4d\",\n  \"Eau libre\"          = \"#4fbddc\",\n  \"Sable, gravier\"     = \"#cccccc\",\n  \"B√¢ti\"               = \"#fc4278\",\n  \"Zone d'activit√©s\"   = \"#ff9191\",\n  \"Marais, tourbi√®re\"  = \"#80be00\",\n  \"Broussailles\"       = \"#80ff00\",\n  \"Carri√®re, d√©charge\" = \"#ffff99\",\n  \"For√™t\"              = \"#00a600\"\n)\n\nggplot() +\n  # D√©finition de la couche\n  geom_sf(data = ocsol, aes(fill = nature), color = NA) +\n  geom_sf(data = com_fin, color = \"white\", fill = NA, linewidth = .5) +\n  # Zoom sur Brest\n  coord_sf(xlim = c(-4.61669,-4.3900), ylim = c(48.36100, 48.46172), crs = 4326) +\n  labs(\n    title = \"Occupation du sol de Brest et ses alentours en 2018\",\n    fill = \"Nature\",\n    caption = \"Data: BD Carto V5 (IGN), 2025. R√©alisation: Antoine Le Doeuff, 2025\"\n  ) +\n  scale_fill_manual(values = pal) +\n  # √âchelle\n  annotation_scale(location = \"br\") +\n  # Nord\n  annotation_north_arrow(\n      location = \"tr\", which_north = \"true\",\n      style = north_arrow_fancy_orienteering\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"bottom\",\n    axis.text = element_blank(),\n    plot.title = element_text(size = 16, face = \"bold\"),\n  )\n\n\n\n\n\n\n\n\nsf ne permet pas de cr√©er des √©chelles et des orientations directement, il faut passer par ggspatial (annotation_north_arrow(), annotation_scale()).\n\n\n7.1.1.2 Choropl√®te continue\n\ncom_fin &lt;- get_wfs(\n  x = NULL,\n  layer = \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune\",\n  ecql_filter = \"code_insee LIKE '29%'\"\n)\n\nFeatures downloaded : 277\n\ncom_fin &lt;- mutate(com_fin,\n  area = as.numeric(st_area(geometry)),\n  dens = population / area * 1e6L\n)\n\n\nggplot() +\n  # D√©finition de la couche\n  geom_sf(data = com_fin, aes(fill = dens)) +\n  # Zoom sur Brest\n  labs(\n    title = \"Densit√© de population communale en Finist√®re\",\n    subtitle = \"Ann√©e : 2025\",\n    fill = \"Densit√© (hab/km¬≤)\",\n    caption = \"Data: Admin Express (IGN), 2025. R√©alisation: Antoine Le Doeuff, 2025\"\n  ) +\n  scale_fill_continuous(palette = \"Reds\") +\n  # √âchelle\n  annotation_scale(location = \"bl\") +\n  # Nord\n  annotation_north_arrow(\n      location = \"tl\", which_north = \"true\",\n      style = north_arrow_fancy_orienteering\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = c(.1, .3),\n    plot.title = element_text(size = 16, face = \"bold\"),\n    plot.subtitle = element_text(size = 14),\n  )\n\n\n\n\n\n\n\n\n\n\n7.1.1.3 Choropl√®te\nAvec geom_sf(), on ne peut pas g√©n√©rer de discr√©tisation automatiquement. Il faut d‚Äôabord cr√©er les classes avec la fonction classInt::classIntervals().\n\nlibrary(patchwork)\n\n# Create differents discretisation\ndisc &lt;- c(\"equal\", \"pretty\", \"quantile\", \"jenks\")\nd &lt;- \"pretty\"\nmaps &lt;- purrr::map(disc, \\(d) {\n  com_fin[[paste0(\"disc_\", d)]] &lt;- cut(\n      com_fin$dens,\n      breaks = classInt::classIntervals(com_fin$dens, n = 5, style = d, dataPrecision=0)$brks,\n      include.lowest = TRUE, dig.lab = 4\n  )\n\n  ggplot(com_fin) +\n    # D√©finition de la couche\n    geom_sf(aes(fill = .data[[paste0(\"disc_\", d)]])) +\n    labs(\n        title = paste(\"Discr√©tisation :\", d),\n        fill = \"Densit√© (hab/km¬≤)\"\n    ) +\n    scale_fill_discrete(palette = \"Reds\") +\n    annotation_scale(location = \"bl\") +\n    annotation_north_arrow(\n        location = \"tl\", which_north = \"true\",\n        style = north_arrow_fancy_orienteering\n    ) +\n    theme_minimal() +\n    theme(\n        legend.position = \"right\",\n        axis.text = element_blank()\n    )\n})\nwrap_plots(maps) +\n  plot_annotation(\n    title = \"Densit√© de population en Finist√®re\",\n    subtitle = \"Ann√©e : 2025\",\n    caption = \"Data: Admin Express (IGN), 2025. R√©alisation: Antoine Le Doeuff, 2025\",\n    theme = theme(plot.title = element_text(size = 18, face = \"bold\"))\n  )\n\n\n\n\n\n\n\n\n\n\n7.1.1.4 Cercles proportionnels\nPour faire des cartes en symbole proportionnels, il faut d‚Äôabord convertir les entit√©s spatiales en points. On utilise ensuite geom_sf() avec l‚Äôargument size dans l‚Äôesth√©tique de la couche.\n\n# Calcul du centro√Øde des communes\ncom_centro &lt;- st_centroid(com_fin)\n\nWarning: st_centroid assumes attributes are constant over geometries\n\n# Discr√©tisation quantile\nbrks &lt;- classInt::classIntervals(com_centro$population, n = 5, style = \"quantile\", dataPrecision=0)$brks\n\nggplot(com_centro) +\n  # D√©finition de la couche\n  geom_sf(data = com_fin) +\n  geom_sf(aes(size = population), color = \"white\", fill = \"steelblue\", shape = 21) +\n  # Zoom sur Brest\n  labs(\n      title = \"Population des communes finist√©riennes\",\n      subtitle = \"Ann√©e 2025 ; Discr√©tisation : quantile\",\n      size = \"Population\",\n      caption = \"Donn√©es : Admin Express (IGN), 2025. R√©alisation : Antoine Le Doeuff, 2025\"\n  ) +\n  scale_size_area(\n    max_size = 11,\n    breaks = brks,\n    labels = brks\n  ) +\n  # √âchelle\n  annotation_scale(location = \"bl\") +\n  # Nord\n  annotation_north_arrow(\n      location = \"tl\", which_north = \"true\",\n      style = north_arrow_fancy_orienteering\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = c(.1, .3),\n    plot.title = element_text(size = 18, face = \"bold\"),\n    plot.subtitle = element_text(size = 14)\n  )\n\n\n\n\n\n\n\n\n\n\n\n7.1.2 Les petits plus\n\n7.1.2.1 Simplifier une g√©om√©trie\nUne des r√®gles en cartographie est d‚Äôutiliser un fond de carte dont la g√©om√©trie est adapt√©e √† l‚Äô√©chelle utilis√©e. Si votre g√©om√©trie est trop d√©taill√©e, votre carte sera ‚Äúsurcharg√©e‚Äù. Pour simlifier une g√©om√©trie, on peut utiliser sf::st_simplify(). Cependant, cette deri√®res ne permet pas une simplification coh√©rente des g√©om√©tries de type multipolygon. Aussi, pour ce type de g√©om√©trie, on utilisera la fonction ms_simplify() du package rmapshaper1.\n1¬†mapshaper utilise la simplification de Visvalingam. Il existe une application en ligne qui permet de r√©aliser cette simplication de mani√®re int√©ractives.\nlibrary(purrr)\n\n# Vecteur de valeur de simplification\nkeeps &lt;- c(0.01, 0.001, 0.0001)\nfin_simps &lt;- map(keeps, ~rmapshaper::ms_simplify(com_fin, keep = .x))\nfins &lt;- c(list(com_fin), fin_simps) |&gt; set_names(c(\"0\", keeps))\n\nmaps &lt;- purrr::imap(fins, \\(f, n_simp) {\n    ggplot(f) +\n      geom_sf() +\n      labs(title = paste(\"simp =\", n_simp)) +\n      theme_minimal()\n})\nwrap_plots(maps) +\n    plot_annotation(\n      title = \"Simplication de la g√©om√©trie des communes finist√©riennes\",\n      caption = \"Donn√©es : Admin Express (IGN), 2025. R√©alisation : Antoine Le Doeuff, 2025\",\n      theme = theme(plot.title = element_text(size = 15, face = \"bold\"))\n    )\n\n\n\n\n\n\n\n\n\n\n7.1.2.2 Fond de cartes open source\nTout sous QGIS, vous pouvez charger des fonds de cartes open-source. Pour cela, vous pouvez par exemple, utiliser le package basemapR.\n\nlibrary(basemapR)\n\ntsport &lt;- get_wfs(\n  x = filter(com_fin, nom_officiel == \"Pont-l'Abb√©\"),\n  layer = \"BDTOPO_V3:terrain_de_sport\",\n  spatial_filter = \"within\"\n)\n\nFeatures downloaded : 16\n\nggplot() +\n  basemapR::base_map(st_bbox(tsport), increase_zoom = 2, basemap = \"positron\") +\n  geom_sf(data = tsport, fill = \"red\") +\n  labs(\n    title = \"Terrain de sport √† Pont-l'Abb√© (29) en 2025\",\n    caption = \"Donn√©es : BTOPO (IGN), 2025 ; CartoDB & OpenStreetMap, 2025. R√©alisation: Antoine Le Doeuff\"\n  ) +\n  annotation_scale(location = \"bl\") +\n  annotation_north_arrow(\n      location = \"tl\", which_north = \"true\",\n      style = north_arrow_fancy_orienteering\n  ) +\n  theme_minimal() +\n  theme(axis.text = element_blank())\n\n\n\n\n\n\n\n\nM√©fiez-vous de ces types de fond de carte. Ils peuvent consid√©rablement alourdir vos cartes avec des informations superflues.",
    "crumbs": [
      "Visualisation",
      "<span class='chapter-number'>7</span>¬† <span class='chapter-title'>Cartographie</span>"
    ]
  },
  {
    "objectID": "ressources/where_data/where_data.html",
    "href": "ressources/where_data/where_data.html",
    "title": "8¬† O√π trouver des donn√©es",
    "section": "",
    "text": "8.1 Sources de donn√©es par th√©matique\nIl existe des listes de donn√©es en ligne. Elles sont plut√¥t exhaustives pour les donn√©es mondiales, c‚Äôest moins vrai pour les donn√©es √† l‚Äô√©chelle des pays :",
    "crumbs": [
      "Sources de donn√©es",
      "<span class='chapter-number'>8</span>¬† <span class='chapter-title'>O√π trouver des donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/where_data/where_data.html#sources-de-donn√©es-par-th√©matique",
    "href": "ressources/where_data/where_data.html#sources-de-donn√©es-par-th√©matique",
    "title": "8¬† O√π trouver des donn√©es",
    "section": "",
    "text": "D√©mographie et population\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nIPUMS (International / USA)\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nUNData\nMonde\n\n\nEurostat\nEurope\n\n\nINSEE\nFrance\n\n\nINED\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nTransports\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nGTFS (op√©rateurs)\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nEurostat\nEurope\n\n\nSNCF Open Data\nFrance\n\n\n\nCertaines m√©tropololes proposent des donn√©es de transports en commun en temps r√©els (par-ex. Rennes).\n\n\n\n\n\n\n\n\n\nAgriculture et alimentation\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nFAO (FAOSTAT)\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nEurostat\nEurope\n\n\nAgreste\nFrance\n\n\nRPG (Registre Parcellaire Graphique) (IGN)\nFrance\n\n\nINRAE Open Data\nSurtout France\n\n\n\n\n\n\n\n\n\n\n\n\nSant√©\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nWHO\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nIPUMS\nMonde\n\n\nDREES\nFrance\n\n\nSant√© publique France\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nUrbanisme, habitat et am√©nagement\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nUN-Habitat\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nEurostat\nEurope\n\n\nINSEE\nFrance\n\n\nCEREMA (am√©nagement)\nFrance\n\n\nDVF (Demande de Valeurs Fonci√®res)\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\n√âconomie, emploi et in√©galit√©s\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nWorld Bank Open Data\nMonde\n\n\nIMF Data\nMonde\n\n\nOECD Data\nMonde\n\n\nEurostat\nEurope\n\n\nINSEE\nFrance\n\n\nURSSAF Open Data\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\n√âducation\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nUNESCO Institute for Statistics\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nOECD Data\nMonde\n\n\nDEPP (MEN)\nFrance\n\n\nINSEE\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nMigrations et mobilit√©s humaines\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nUNData\nMonde\n\n\nWorld Bank Open Data\nMonde\n\n\nOECD Data\nMonde\n\n\nEurostat\nEurope\n\n\nINSEE\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nPolitique et conflits\n\n\n\n\n\n\n\n\nTh√®me\nSource\nEmprise\n\n\n\n\nConflits\nACLED\nMonde\n\n\nPolitique\nV-Dem (d√©mocratie)\nMonde\n\n\nPolitique\ndata.gouv.fr ‚Äì √©lections\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nOccupation/utilisation du sol\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nCopernicus Land Monitoring Service\nMonde\n\n\nCorine Land Cover\nEurope\n\n\nTheia Land\nFrance m√©tropolitaine\n\n\nOCS GE (IGN)\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\n√âl√©vation\n\n\n\n\n\n\n\n\nSource\nR√©solution\nEmprise\n\n\n\n\nASTER\n30 m\nMonde\n\n\nSRTM\n\\(\\approx\\) 90 m\nMonde\n\n\nBD ALTI (IGN)\n25 m\nFrance\n\n\nRGE ALTI (IGN)\n1 m\nFrance\n\n\nLitto 3D (IGN/SHOM)\n20 √† 50 cm\nFrance (littoral)\n\n\n\n\n\n\n\n\n\n\n\n\nClimat et m√©t√©o\n\n\n\n\n\n\n\n\nSource\nType\nEmprise\n\n\n\n\nWorldClim\nObservation / Mod√®le\nMonde\n\n\nERA5\nMod√®le\nMonde\n\n\nM√©t√©o-France\nObservation / Mod√®le\nFrance\n\n\nSAFRAN\nMod√®le\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nHydrologie\n\n\n\n\n\n\n\n\nSource\nEmprise\n\n\n\n\nHydro SHEDS\nMonde\n\n\nHydro Portail\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\nNiveau d‚Äôeau et √©tat de mer\n\n\n\n\n\n\n\n\nTh√®me\nSource\nType\nEmprise\n\n\n\n\n√âtats de mer\nCopernicus Marine Service\nObservation\nMonde\n\n\n√âtats de mer\nCandhis (CEREMA)\nObservation\nFrance\n\n\n√âtats de mer\nERA5\nMod√®le\nMonde\n\n\n√âtats de mer\nRessource Code\nMod√®le\nFa√ßade Atlantique Europ√©enne\n\n\nNiveau d‚Äôeau\nPSML\nObservation\nMonde\n\n\nNiveau d‚Äôeau\nFES2022\nMod√®le\nMonde\n\n\nNiveau d‚Äôeau\nSHOM\nObservation / Mod√®le\nFrance\n\n\n\n\n\n\n\n\n\n\n\n\n√âcologie, biologie\n\n\n\n\n\n\n\n\nTh√®me\nSource\nEmprise\n\n\n\n\nBiodiversit√©\nGlobal Biodiversity Information Facility\nMonde\n\n\nBiodiversit√©\nOcean Biodiversity Information System\nMonde\n\n\nBiodiversit√©\nUICN red list\nMonde\n\n\nSol\nISRIC\nMonde\n\n\nSol\nGis Sol\nFrance",
    "crumbs": [
      "Sources de donn√©es",
      "<span class='chapter-number'>8</span>¬† <span class='chapter-title'>O√π trouver des donn√©es</span>"
    ]
  },
  {
    "objectID": "ressources/where_data/where_data.html#fond-de-cartes",
    "href": "ressources/where_data/where_data.html#fond-de-cartes",
    "title": "8¬† O√π trouver des donn√©es",
    "section": "8.2 Fond de cartes",
    "text": "8.2 Fond de cartes\n\n8.2.1 France\nPour obtenir des fonds de cartes du territoire fran√ßais, on se tournera vers l‚ÄôIGN. Tout ce que vous voyez sur une carte topographique IGN, vous pouvez le r√©cup√©rer. L‚ÄôIGN organise ses donn√©es par base, vous trouverez ci-dessous une description des bases les plus courrament utilis√©es :\n\n\n\nBase\ntype\nDescription\n\n\n\n\nAdmin Express\nVectoriel\nBase de donn√©es du d√©coupage administratif fran√ßais\n\n\nBDCarto\nVectoriel\nBase de donn√©es moyenne √©chelle\n\n\nBDTopo\nVectoriel\nBase de donn√©es d√©taill√©es\n\n\nContours‚Ä¶IRIS\nVectoriel\nLe contour des IRIS\n\n\nBDALTI\nRaster\nMod√®le Num√©rique de Terrain (MNT). R√©solution 25 m\n\n\nBDOrtho\nRaster\nBase d‚Äôorthophotos de l‚ÄôIGN. R√©solution 20 cm\n\n\n\nUne liste des bases plus d√©taill√©e est disponible sur le site de l‚ÄôIGN. Les m√©tadonn√©es sont disponibles sur la page web d√©di√©e.\nPou r√©cup√©rer ces donn√©es, vous pouvez vous rendre sur le site de l‚ÄôIGN et les t√©l√©charger. Il est √©galement possible de les t√©l√©charger directement sur R avec le package happign. En utilisant ce package vous vous assurez de ne t√©l√©charger que les donn√©es dont vous avez besoin1.\n1¬†En effet, sur le site de l‚ÄôIGN vous ne pouvez que t√©l√©charger les bases par d√©partements sans possibilit√© de choisir les donn√©es que vous souhaitez en particulier ; pas tr√®s √©colo cette affaire.Mettons que l‚Äôon souhaite r√©cup√©rer les b√¢timents de Guiss√©ny (29) ainsi que l‚Äôemprise administrative de la commune. Si l‚Äôon a aucune id√©e d‚Äôo√π l‚Äôon peut trouver les b√¢timents, on peut chercher dans les m√©tadonn√©es des couches vectorielles.\n\nlibrary(happign)\n\n# R√©cup√©ration des m√©tadonn√©es\nmeta &lt;- get_layers_metadata(data_type = \"wfs\")\n\n# R√©cup√©ration du nom des couches\nname &lt;- meta$Name\n\n# On cherche les couches qui contiennent la cha√Æne de caract√®re \"bati\"\ncom_name &lt;- name[grep(x = name, \"commune\")]\nhead(com_name)\n\n[1] \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:chef_lieu_de_commune\"                     \n[2] \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:chef_lieu_de_commune_associee_ou_deleguee\"\n[3] \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune\"                                  \n[4] \"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune_associee_ou_deleguee\"             \n[5] \"ADMINEXPRESS-COG.2017:commune\"                                                   \n[6] \"ADMINEXPRESS-COG.2018:commune\"                                                   \n\nbati &lt;- name[grep(x = name, \"bati\")]\nhead(bati)\n\n[1] \"BAN-PLUS:lien_adresse_bati\"                                 \n[2] \"BAN-PLUS:lien_bati_parcelle\"                                \n[3] \"BDCARTO_ETAT-MAJOR.NIVEAU4:c_1_2_ocs_ancien_sans_bati\"      \n[4] \"BDCARTO_ETAT-MAJOR.NIVEAU4:c_2_1_batiment\"                  \n[5] \"BDCARTO_ETAT-MAJOR.NIVEAU4:c_2_2_batiment_hors_zone_urbaine\"\n[6] \"BDCARTO_ETAT-MAJOR.NIVEAU3:c_1_2_ocs_ancien_sans_bati\"      \n\n\nOn obtient toute les donn√©es disponibles. Nous utiliserons les donn√©es de la BDTOPO BDTOPO_V3:batiment. L‚Äô√©tape suivant consiste √† filtrer la couche pour ne retenir que les informations qui nous int√©resse. On peut filtrer par attributs ou par op√©ration spatiale. Le filtre sera r√©alis√© sur les serveurs de l‚ÄôIGN et vous r√©cup√©rez le r√©sultat.\nPour filtrer par attribut, on utilise un filtre ECQL. Il s‚Äôagit d‚Äôun langage de requ√™te tr√®s proche du SQL (ce qui vous utilisez sous QGIS pur filtrer vos donn√©es). Pour savoir comment filtrer vos donn√©es, il vous faut d‚Äôabord savoir quels sont les attributs de votre couche. Pour cela, on utilise la fonction get_wfs_attributes().\n\nget_wfs_attributes(\"BDTOPO_V3:commune\")\n\n [1] \"cleabs\"                             \"code_insee\"                        \n [3] \"code_insee_du_canton\"               \"code_insee_de_l_arrondissement\"    \n [5] \"code_insee_de_la_collectivite_terr\" \"code_insee_du_departement\"         \n [7] \"code_insee_de_la_region\"            \"population\"                        \n [9] \"superficie_cadastrale\"              \"date_creation\"                     \n[11] \"date_modification\"                  \"date_d_apparition\"                 \n[13] \"date_de_confirmation\"               \"code_postal\"                       \n[15] \"nom_officiel\"                       \"chef_lieu_d_arrondissement\"        \n[17] \"chef_lieu_de_collectivite_terr\"     \"chef_lieu_de_departement\"          \n[19] \"chef_lieu_de_region\"                \"capitale_d_etat\"                   \n[21] \"date_du_recensement\"                \"organisme_recenseur\"               \n[23] \"code_siren\"                         \"codes_siren_des_epci\"              \n[25] \"lien_vers_chef_lieu\"                \"liens_vers_autorite_administrative\"\n\n# On r√©cup√®re guiss√©ny\ncom &lt;- get_wfs(layer = \"BDTOPO_V3:commune\", ecql_filter = \"code_insee = '29077'\")\n\nFeatures downloaded : 1\n\n\nUn fois que l‚Äôon a r√©cup√©r√© la commune, on peut r√©cup√©rer les batiments qui intersectent la commune :\n\nbatiments &lt;- get_wfs(\n  x = com,\n  layer = \"BDTOPO_V3:batiment\",\n  spatial_filter = \"intersects\"\n)\n\nFeatures downloaded : 1000...2000...2742\n\n\n\n\nCode\nlibrary(ggspatial)\nlibrary(ggplot2)\nlibrary(sf)\n\nggplot() +\n  geom_sf(data = com) +\n  geom_sf(data = batiments, fill = \"red\") +\n  annotation_scale(location = \"br\") +\n  annotation_north_arrow(\n      location = \"tr\", which_north = \"true\",\n      style = north_arrow_fancy_orienteering\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\n8.2.2 Fond de cartes √† petite faible\nPour des fond de cartes √† petites √©chelles, se tournera vers Natural Earth. Ce jeu de donn√©es enregistre les donn√©es √©l√©mentaires pour cr√©er des fonds de cartes : fronti√®res des pays, routes, cours d‚Äôeau, toponymie, zones urbaines, lacs, etc.\nLe package rnaturalearth permet de r√©cup√©rer directement ces donn√©es sous R. Pour une carte du continent europ√©en :\n\neurope &lt;- rnaturalearth::ne_countries(continent = \"Europe\", scale = \"large\")\n\nggplot() +\n  geom_sf(data = europe) +\n  theme_minimal()",
    "crumbs": [
      "Sources de donn√©es",
      "<span class='chapter-number'>8</span>¬† <span class='chapter-title'>O√π trouver des donn√©es</span>"
    ]
  }
]